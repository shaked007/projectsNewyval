(function(){var e={46700:function(e,t,a){var s={"./af":49953,"./af.js":49953,"./ar":76113,"./ar-ma":75144,"./ar-ma.js":75144,"./ar-sa":7807,"./ar-sa.js":7807,"./ar-tn":88817,"./ar-tn.js":88817,"./ar.js":76113,"./az":67938,"./az.js":67938,"./be":45328,"./be.js":45328,"./bg":87852,"./bg.js":87852,"./bn":31135,"./bn.js":31135,"./bo":93671,"./bo.js":93671,"./br":13875,"./br.js":13875,"./bs":71582,"./bs.js":71582,"./ca":62398,"./ca.js":62398,"./cs":88005,"./cs.js":88005,"./cv":86552,"./cv.js":86552,"./cy":31942,"./cy.js":31942,"./da":15604,"./da.js":15604,"./de":99519,"./de-at":14457,"./de-at.js":14457,"./de.js":99519,"./dv":44701,"./dv.js":44701,"./el":60429,"./el.js":60429,"./en-au":64969,"./en-au.js":64969,"./en-ca":65564,"./en-ca.js":65564,"./en-gb":66633,"./en-gb.js":66633,"./en-ie":45205,"./en-ie.js":45205,"./en-nz":13362,"./en-nz.js":13362,"./eo":38086,"./eo.js":38086,"./es":96525,"./es-do":89267,"./es-do.js":89267,"./es.js":96525,"./et":63902,"./et.js":63902,"./eu":9753,"./eu.js":9753,"./fa":26767,"./fa.js":26767,"./fi":62351,"./fi.js":62351,"./fo":17216,"./fo.js":17216,"./fr":97438,"./fr-ca":47611,"./fr-ca.js":47611,"./fr-ch":20633,"./fr-ch.js":20633,"./fr.js":97438,"./fy":24192,"./fy.js":24192,"./gd":95965,"./gd.js":95965,"./gl":54873,"./gl.js":54873,"./he":50020,"./he.js":50020,"./hi":98261,"./hi.js":98261,"./hr":67149,"./hr.js":67149,"./hu":67090,"./hu.js":67090,"./hy-am":97534,"./hy-am.js":97534,"./id":17066,"./id.js":17066,"./is":70692,"./is.js":70692,"./it":41165,"./it.js":41165,"./ja":28140,"./ja.js":28140,"./jv":48325,"./jv.js":48325,"./ka":86095,"./ka.js":86095,"./kk":65472,"./kk.js":65472,"./km":30635,"./km.js":30635,"./ko":30971,"./ko.js":30971,"./ky":77178,"./ky.js":77178,"./lb":22719,"./lb.js":22719,"./lo":94720,"./lo.js":94720,"./lt":81441,"./lt.js":81441,"./lv":41119,"./lv.js":41119,"./me":30373,"./me.js":30373,"./mk":79938,"./mk.js":79938,"./ml":37453,"./ml.js":37453,"./mr":87156,"./mr.js":87156,"./ms":56142,"./ms-my":58961,"./ms-my.js":58961,"./ms.js":56142,"./my":10972,"./my.js":10972,"./nb":20863,"./nb.js":20863,"./ne":32446,"./ne.js":32446,"./nl":45380,"./nl.js":45380,"./nn":88733,"./nn.js":88733,"./pa-in":76779,"./pa-in.js":76779,"./pl":40174,"./pl.js":40174,"./pt":6269,"./pt-br":98455,"./pt-br.js":98455,"./pt.js":6269,"./ro":52710,"./ro.js":52710,"./ru":59456,"./ru.js":59456,"./se":92356,"./se.js":92356,"./si":15839,"./si.js":15839,"./sk":51900,"./sk.js":51900,"./sl":84106,"./sl.js":84106,"./sq":69087,"./sq.js":69087,"./sr":70413,"./sr-cyrl":65830,"./sr-cyrl.js":65830,"./sr.js":70413,"./ss":53277,"./ss.js":53277,"./sv":73338,"./sv.js":73338,"./sw":67999,"./sw.js":67999,"./ta":26294,"./ta.js":26294,"./te":75993,"./te.js":75993,"./th":10585,"./th.js":10585,"./tl-ph":9151,"./tl-ph.js":9151,"./tlh":78598,"./tlh.js":78598,"./tr":33722,"./tr.js":33722,"./tzl":60688,"./tzl.js":60688,"./tzm":88662,"./tzm-latn":73037,"./tzm-latn.js":73037,"./tzm.js":88662,"./uk":80031,"./uk.js":80031,"./uz":57231,"./uz.js":57231,"./vi":46165,"./vi.js":46165,"./x-pseudo":72341,"./x-pseudo.js":72341,"./zh-cn":98248,"./zh-cn.js":98248,"./zh-tw":11916,"./zh-tw.js":11916};function i(e){var t=l(e);return a(t)}function l(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}i.keys=function(){return Object.keys(s)},i.resolve=l,e.exports=i,i.id=46700},78854:function(e,t,a){const s=!window.location.href.includes("portal.army.idf");var i=a(46085);const l="",o=s?l:"https://portal.army.idf/sites/gdud0383/Team/";function n(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))}e.exports={getStuffDjangoCheck(e,t){if(s){let t=i.get(o+"/check/name/"+e+"/",{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});return t=t.data[0]["checkId"],t}{let t=i.get(o+"_api/web/lists/getbyTitle('checks')/items",{params:{$filter:`Title eq '${e}' and mahlaka eq '${this.mahlaka}'`,$top:1,$select:"checkId"}});return t=t.data[0]["checkId"],t}},GetChecksByMahlakaName:async function(e){if(s){let t=i.get(o+"/check/mahlaka/"+e+"/",{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});return t}},Test:async function(e){},PutTool:async function(e){if(s){null!=e.delayCause&&(e.delayCause=e.delayCause.toUpperCase());var t={comments:e.comments,delayCause:e.delayCause,Title:e.Title,ip:e.ip,boolChecks:e.details.boolChecks,info:e.details.info,hamalId:e.hamalId,type:e.type};let a=i.put(o+"/tool/update/"+e.id+"/",t,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});return a}{let t=await i.post(o+"_api/contextinfo");t=t.data.FormDigestValue,null!=e.delayCause&&(e.delayCause=e.delayCause.toUpperCase());const a={headers:{"X-RequestDigest":t,"X-HTTP-METHOD":"MERGE","IF-MATCH":"*","content-type":"application/json;odata=verbose",Accept:"application/json;odata=verbose"}};e.details=JSON.stringify(e.details);const s={__metadata:{type:"SP.Data.TrialList2ListItem"},type:e.type,details:e.details,delayCause:e.delayCause,Title:e.Title,ip:e.ip,hamalId:e.hamalId,comments:e.comments};await i.post(o+`/_api/web/lists/getbytitle('trialList2')/items(${e.id})`,s,a);return e.details=await n(e.details),e.id=e.Id,e}},PostTool:async function(e){if(s){console.log(e);var t={comments:e.comments,delayCause:e.delayCause,Title:e.Title,type:e.type,ip:e.ip,boolChecks:e.details.boolChecks,info:e.details.info,hamalId:e.hamalId},a=await i.post(o+"/tool/create/",t,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}}),l={delayCause:a.data.delayCause,comments:a.data.comments,Title:a.data.Title,type:a.data.type,hamalId:a.data.hamalId,id:a.data.id,ip:a.data.ip,details:{boolChecks:a.data.boolChecks,info:a.data.info}};return l}{let t=await i.post(o+"_api/contextinfo");t=t.data.FormDigestValue;const s={headers:{"X-RequestDigest":t,"content-type":"application/json;odata=verbose",Accept:"application/json;odata=verbose"}},l=e.details;e.details=JSON.stringify(e.details);const n={__metadata:{type:"SP.Data.TrialList2ListItem"},...e};a=await i.post(o+"/_api/web/lists/getbytitle('trialList2')/items",n,s);let r=a.data.d;return r.id=r.Id,r.details=l,r}},DeleteTool:async function(e){if(s){var t=await i.delete(o+"/tool/delete/"+e+"/",{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});return t}{let a=await i.post(o+"_api/contextinfo");a=a.data.FormDigestValue;const s={headers:{"X-HTTP-METHOD":"DELETE","IF-MATCH":"*","X-RequestDigest":a,"content-type":"application/json;odata=verbose",Accept:"application/json;odata=verbose"}},l={};t=await i.post(o+`/_api/web/lists/getbytitle('trialList2')/items(${e})`,l,s)}}}},91059:function(e,t,a){"use strict";a(72491),a(61034);var s=a(5102),i=a(29269);function l(e,t){const a=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(a)}var o=a(57617),n=a(18712),r=a(16931),c=a(42952),h=a(35367),d=a(74553),u=a(14633),m=a(85246),p=a(81410),k=a.n(p);const g={},f=(0,o.Z)(g,[["render",l]]);var y=f;k()(g,"components",{QBtnGroup:n.Z,QInput:r.Z,QMenu:c.Z,QVirtualScroll:h.Z,QField:d.Z,QIcon:u.Z,QItem:m.Z});var b=a(22201);const w={class:"main-container",ref:"background"},v={class:"spinner-container"},C={key:0,class:"spinner-border text-light loading-hamal-spinner"},T={class:"hamals-container"},D={class:"finish-link-container"},I=(0,i._)("span",{class:"bi bi-arrow-left"},null,-1);function $(e,t,a,s,l,o){const n=(0,i.up)("q-btn-toggle"),r=(0,i.up)("Carousel"),c=(0,i.up)("q-carousel-slide"),h=(0,i.up)("q-carousel"),d=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",v,[l.isSpinner?((0,i.wg)(),(0,i.iD)("div",C)):(0,i.kq)("",!0)]),(0,i._)("div",T,[(0,i.Wm)(n,{flat:"",size:"1.4vw",modelValue:l.sliders,"onUpdate:modelValue":t[0]||(t[0]=e=>l.sliders=e),options:l.options},null,8,["modelValue","options"])]),l.flag?((0,i.wg)(),(0,i.j4)(h,{key:0,ref:"maincar",modelValue:l.sliders,"onUpdate:modelValue":t[1]||(t[1]=e=>l.sliders=e),animated:"","transition-prev":"slide-right","transition-next":"slide-left",arrows:"",class:"background-colors","control-color":"white",color:"white",height:"800px"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.hamalsList,((t,a)=>((0,i.wg)(),(0,i.j4)(c,{key:a,name:t.hamalName,class:"column no-wrap it"},{default:(0,i.w5)((()=>["vc"==e.$mahlaka?((0,i.wg)(),(0,i.j4)(r,{onReloadItems:o.newReloadFunc,onOnDelay:o.updateDelay,onOnComm:o.updateLocal,onOnCheckout:o.handlerFunc,hamal:t.hamalName,hamalId:t.id,tools:t.tools,key:l.tabKey},null,8,["onReloadItems","onOnDelay","onOnComm","onOnCheckout","hamal","hamalId","tools"])):(0,i.kq)("",!0)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])):(0,i.kq)("",!0),(0,i._)("div",D,[(0,i.kq)("",!0),(0,i.Wm)(d,{class:"to-main-menu-link",to:"/"},{default:(0,i.w5)((()=>[I,(0,i.Uk)(" חזור")])),_:1})])],512)}a(84719);var _=a(73201);const L={class:"posi"};function S(e,t,a,s,l,o){const n=(0,i.up)("q-btn-toggle"),r=(0,i.up)("TableSlide"),c=(0,i.up)("q-carousel-slide"),h=(0,i.up)("q-carousel");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h3",null,(0,_.zw)(a.hamal),1),(0,i._)("div",L,[(0,i.Wm)(n,{flat:"",size:"1.5rem",modelValue:l.sliders,"onUpdate:modelValue":t[0]||(t[0]=e=>l.sliders=e),options:l.options},null,8,["modelValue","options"]),l.flag?((0,i.wg)(),(0,i.j4)(h,{key:0,ref:"qar",modelValue:l.sliders,"onUpdate:modelValue":t[1]||(t[1]=e=>l.sliders=e),animated:"","transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",class:"overflow-class","control-color":"white",color:"white",height:"75%"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(e.finalTools),((t,s)=>((0,i.wg)(),(0,i.j4)(c,{key:s,name:t,class:"column no-wrap marg"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{onOnDelay:o.passDelayCause,onReloadItems:o.reloadItems,onOnComment:o.passComment,onOnFailure:o.passBoolcheck,hamal:a.hamal,newTable:e.finalTools[t],type:t},null,8,["onOnDelay","onReloadItems","onOnComment","onOnFailure","hamal","newTable","type"])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])):(0,i.kq)("",!0)])],64)}const j=e=>((0,i.dD)("data-v-b67c2070"),e=e(),(0,i.Cn)(),e),O={class:"tr-head"},q={class:"td-buttons"},N=j((()=>(0,i._)("th",null," שם הרכיב",-1))),F=j((()=>(0,i._)("th",null,"כתובת ip ",-1))),x=j((()=>(0,i._)("th",null," גורם מעכב",-1))),V=j((()=>(0,i._)("th",null," עוד מידע",-1))),E={class:"td-buttons"},z={key:0},P={key:1},A=["checked","onChange"],M={key:4},U={key:5,class:"comments"},H=["onInput","onUpdate:modelValue"];function B(e,t,a,l,o,n){const r=(0,i.up)("AddTool"),c=(0,i.up)("DeleteEditBtns"),h=(0,i.up)("q-select"),d=(0,i.up)("EditToolMode");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("table",{class:"edit-table",ref:o.header},[(0,i._)("thead",null,[(0,i._)("tr",O,[(0,i._)("th",q,[((0,i.wg)(),(0,i.j4)(r,{onAddItem:n.addItem,onReloadItems:n.reloadItems,tool:o.table[0],type:a.type,hamal:a.hamal,key:o.tabKey},null,8,["onAddItem","onReloadItems","tool","type","hamal"]))]),N,F,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(o.table[0].details.info),(e=>((0,i.wg)(),(0,i.iD)("th",{key:e},(0,_.zw)(e),1)))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(o.table[0].details.boolChecks),(e=>((0,i.wg)(),(0,i.iD)("th",{key:e},(0,_.zw)(e),1)))),128)),x,V])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table,((e,l)=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i.wy)((0,i._)("td",E,[(0,i.Wm)(c,{onDeleteItem:t=>n.deleteItem(e.id),onReloadItems:n.reloadItems,onStartEditMode:t=>n.startEditMode(e.id,e),title:e.Title,id:e.id,isLast:o.table.length},null,8,["onDeleteItem","onReloadItems","onStartEditMode","title","id","isLast"])],512),[[s.F8,e.id!=o.editModeId]]),e.id!=o.editModeId?((0,i.wg)(),(0,i.iD)("td",z,(0,_.zw)(e.Title),1)):(0,i.kq)("",!0),e.id!=o.editModeId?((0,i.wg)(),(0,i.iD)("td",P,(0,_.zw)(e.ip),1)):(0,i.kq)("",!0),e.id!=o.editModeId?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:2},(0,i.Ko)(Object.keys(e.details.info),((t,a)=>((0,i.wg)(),(0,i.iD)("td",{key:a,class:"checkbox-bug"},(0,_.zw)(e.details.info[t]),1)))),128)):(0,i.kq)("",!0),e.id!=o.editModeId?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:3},(0,i.Ko)(Object.keys(e.details.boolChecks),((t,a)=>((0,i.wg)(),(0,i.iD)("td",{key:a,class:"checkbox-bug"},[(0,i._)("input",{disabled:"disabled",type:"checkbox",checked:!e.details.boolChecks[t],style:(0,_.j5)(e.details.boolChecks[t]?o.Ystyle:o.Xstyle),onChange:a=>n.updateReport(a,e.details.boolChecks,t,e)},null,44,A)])))),128)):(0,i.kq)("",!0),e.id!=o.editModeId?((0,i.wg)(),(0,i.iD)("td",M,[Object.keys(e.details.boolChecks).some((t=>!e.details.boolChecks[t]))?((0,i.wg)(),(0,i.j4)(h,{key:0,class:"sizing",value:e.delayCause,dark:"",color:"white","onUpdate:modelValue":[t=>{n.updateDelayCause(t,e.Title)},t=>e.delayCause=t],modelValue:e.delayCause},null,8,["value","onUpdate:modelValue","modelValue"])):(0,i.kq)("",!0)])):(0,i.kq)("",!0),e.id!=o.editModeId?((0,i.wg)(),(0,i.iD)("td",U,[(0,i.wy)((0,i._)("textarea",{disabled:"disabled","max-rows":"3",onInput:t=>n.updateLocal(e.Title,e.comments),placeHolder:"      הכנס הערה",maxlength:"45",class:"comments-input","onUpdate:modelValue":t=>e.comments=t},"\r\n                              ",40,H),[[s.nr,e.comments]])])):(0,i.kq)("",!0),e.id==o.editModeId?((0,i.wg)(),(0,i.j4)(d,{key:6,type:a.type,tool:e,onReupdateTool:n.reupdateTool,onReloadItems:n.reloadWithParam,tdWidth:o.tdWidth,isFirst:!l,onEndEditMode:t[0]||(t[0]=e=>n.endEditMode())},null,8,["type","tool","onReupdateTool","onReloadItems","tdWidth","isFirst"])):(0,i.kq)("",!0)])))),128))])],512)),[[s.F8,o.flag]])}const R=e=>((0,i.dD)("data-v-5acb0658"),e=e(),(0,i.Cn)(),e),Z={class:"cur-dig",ref:"add-tool-dialog"},W={dir:"ltr"},J={class:"flex-name-and-ip"},Y=R((()=>(0,i._)("h4",null,"בדיקות ",-1))),K={class:"flex-boolchecks"},Q=["id","onUpdate:modelValue","onChange"],X=["for"],G={key:0,class:"delay-cause-container"},ee=R((()=>(0,i._)("h6",null,"סיבת עיכוב ",-1))),te=["value"],ae=R((()=>(0,i._)("h4",null,"מידע ",-1))),se={key:1},ie={class:"flex-info"},le=R((()=>(0,i._)("h4",null,"הערות ",-1))),oe={class:"comments-wrapper"},ne={class:"flex-btns"},re=["disabled"];function ce(e,t,a,l,o,n){const r=(0,i.up)("q-input");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("button",{class:"plus-btn",onClick:t[0]||(t[0]=e=>this.$refs["add-tool-dialog"].showModal())}," +"),(0,i._)("dialog",Z,[(0,i._)("h3",null,[(0,i.Uk)(" הוספת "),(0,i._)("span",W,(0,_.zw)(a.type),1)]),(0,i._)("div",J,[(0,i.Wm)(r,{modelValue:o.newToolName,"onUpdate:modelValue":[t[1]||(t[1]=e=>o.newToolName=e),n.updateToolData],type:"text",dir:"rtl",class:"direction-class",outlined:"",placeholder:"הכנס ip"},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Wm)(r,{modelValue:o.newToolIp,"onUpdate:modelValue":[t[2]||(t[2]=e=>o.newToolIp=e),n.updateToolData],type:"text",dir:"rtl",class:"direction-class",outlined:"",placeholder:"הכנס שם רכיב"},null,8,["modelValue","onUpdate:modelValue"])]),Y,(0,i._)("div",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.tool.details.boolChecks),((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i.wy)((0,i._)("input",{id:e,class:"checkbox-bug",type:"checkbox",checked:!0,"onUpdate:modelValue":t=>o.newToolData.details.boolChecks[e]=t,ref_for:!0,ref:a.tool.Title+"boolcheck"+t,onChange:t=>n.updateBoolChecks(e)},null,40,Q),[[s.e8,o.newToolData.details.boolChecks[e]]]),(0,i._)("label",{for:e},(0,_.zw)(e),9,X)])))),128))]),o.delayCauseFlag?((0,i.wg)(),(0,i.iD)("div",G,[ee,(0,i.wy)((0,i._)("select",{onInput:t[3]||(t[3]=t=>n.updateDelayCause(e.delayCause)),"onUpdate:modelValue":t[4]||(t[4]=e=>o.delayValue=e),ref:"DelayInput",class:"form-select form-select-sm categories-class dropdown-menu-right",size:"1","aria-label":".form-select-lg example"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.reasonsArray,(e=>((0,i.wg)(),(0,i.iD)("option",{key:e,value:e},(0,_.zw)(e),9,te)))),128))],544),[[s.bM,o.delayValue]])])):(0,i.kq)("",!0),ae,a.tool.details.info.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("h6",se,"אין מידע עבור פריט זה ")),(0,i._)("div",ie,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.tool.details.info),((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"info-wrapper"},[(0,i.Wm)(r,{"onUpdate:modelValue":[t=>n.updateInfo(e),t=>o.newToolData.details.info[e]=t],modelValue:o.newToolData.details.info[e],ref_for:!0,ref:"info"+e,type:"text",dir:"rtl",class:"direction-class",outlined:"",placeholder:`הכנס ${e}`},null,8,["onUpdate:modelValue","modelValue","placeholder"])])))),128))]),le,(0,i._)("div",oe,[(0,i.Wm)(r,{"aria-rowspan":"2",modelValue:o.newToolComments,"onUpdate:modelValue":[t[5]||(t[5]=e=>o.newToolComments=e),n.updateToolData],type:"textarea",dir:"rtl",class:"textarea",outlined:"",placeHolder:"הכנס הערה"},null,8,["modelValue","onUpdate:modelValue"])]),(0,i._)("div",ne,[(0,i._)("button",{class:"cancel-btn",onClick:t[6]||(t[6]=t=>n.handleCloseDialog(e.$refs["add-tool-dialog"]))}," בטל"),(0,i.Uk)(),(0,i._)("button",{class:"submit-btn",ref:"submit-btn",disabled:o.isValid,onClick:t[7]||(t[7]=(...e)=>n.postNewDevice&&n.postNewDevice(...e))},"הוסף ",8,re)])],512)],64)}var he=a(46085),de=a.n(he),ue=a(78854),me=a.n(ue),pe={props:["tool","type","hamal"],name:"AddTool",data(){return{isValid:!0,test:!0,reasonsArray:["SOC","PC",'תקנ"ם',"VIP",'מצודה וחמ"לים',"סיסטם","VC","מחכים לציוד","אחר"],delayValue:"",newToolData:{Title:"",ip:"",details:{info:[],boolChecks:[]},comments:"",delayCause:null,hamalId:"",type:""},newToolName:"",newToolIp:"",newToolComments:"",delayCauseFlag:!1,newvalUrl:"http://127.0.0.1:8000"}},methods:{handleCloseDialog(e){e.classList.add("disppear-class");var t=()=>{e.close(),e.classList.remove("disppear-class"),e.removeEventListener("animationend",t)};e.addEventListener("animationend",t,{once:!0})},checkIfValidInput(){var e=!0;""==this.newToolData.Title&&(e=!1),""==this.newToolData.ip&&(e=!1),this.isValid=!e},ChangeToGoodClass(){this.$refs["buttonAdd"].classList.value="buttonAdd-good",this.$refs["trTop"].classList.value="tr-top-good"},ChangeToClass(){this.$refs["buttonAdd"].classList.value="buttonAdd",this.$refs["trTop"].classList.value="tr-top"},updateDelayCause(e){this.delayValue=e,this.newToolData.delayCause=e},updateToolData(){this.newToolData.Title=this.newToolName,this.newToolData.ip=this.newToolIp,this.newToolData.comments=this.newToolComments,this.checkIfValidInput()},updateBoolChecks(e){this.delayCauseFlag=this.atListOneBoolCheckFalse()},updateInfo(e){},atListOneBoolCheckFalse(){let e=!1;return Object.keys(this.newToolData.details.boolChecks).forEach((t=>{this.newToolData.details.boolChecks[t]||(e=!0)})),e},async postNewDevice(){this.handleCloseDialog(this.$refs["add-tool-dialog"]),this.$swal({title:"מעלה פריט",text:"אנא המתן"}),this.$swal.showLoading();let e={...this.newToolData};if(""!=this.newToolData.Title&&""!=this.newToolData.ip){var t=await me().PostTool(e);this.$emit("add-item",t)}},arrToObj(e){var t=e.reduce((function(e,t){var a=Object.keys(t)[0];return e[a]=t[a],e}),{});return t}},beforeMount(){const e=this.$props["tool"].details.boolChecks,t=this.$props["tool"].details.info;Object.keys(e).forEach((e=>{var t={};t[e]=!0,this.newToolData.details.boolChecks.push(t)})),Object.keys(t).forEach((e=>{var t={};t[e]="",this.newToolData.details.info.push(t)})),this.newToolData.type=this.$props["tool"].type,this.newToolData.hamalId=this.$props["tool"].hamalId,this.newToolData.details.info=this.arrToObj(this.newToolData.details.info),this.newToolData.details.boolChecks=this.arrToObj(this.newToolData.details.boolChecks)},mounted(){}},ke=a(74353);const ge=(0,o.Z)(pe,[["render",ce],["__scopeId","data-v-5acb0658"]]);var fe=ge;k()(pe,"components",{QInput:r.Z,QSelect:ke.Z});const ye={class:"container"};function be(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",ye,[(0,i._)("button",{style:{"font-size":"25px"},class:"edit-button",onClick:t[0]||(t[0]=e=>o.startEditMode())},"🖍"),(0,i._)("button",{style:{"font-size":"25px"},class:"delete-button",onClick:t[1]||(t[1]=e=>o.deleteTool())},"🗑")])}var we={props:["title","id","isLast","isFirst"],name:"DeleteEditTool",data(){return{newvalUrl:"http://127.0.0.1:8000"}},methods:{async deleteTool(){if(1==this.$props["isLast"])alert("אסור למחוק את הרכיב האחרון");else{let t=await this.$swal({icon:"warning",showDenyButton:!1,showCancelButton:!0,showConfirmButton:!0,cancelButtonText:"בטל",confirmButtonText:"מחק",confirmButtonColor:"#ff8427",title:`האם  אתה בטוח שברצונך למחוק את   ${this.title} `});if(t.isConfirmed){this.$swal.showLoading();var e=await me().DeleteTool(this.$props["id"]);console.log(e),this.$emit("delete-item")}}},reloadItems(){this.$emit("reload-items")},startEditMode(){this.$emit("start-edit-mode")}},beforeMount(){},mounted(){}};const ve=(0,o.Z)(we,[["render",be],["__scopeId","data-v-4ed016c4"]]);var Ce=ve;const Te={ref:"edit-table"},De={class:"container"},Ie={ref:"name-td"},$e={ref:"ip-td"},_e=["placeholder","onUpdate:modelValue"],Le=["onUpdate:modelValue","checked"],Se={ref:"delay-cause"},je={ref:"comment",class:"comments"};function Oe(e,t,a,l,o,n){const r=(0,i.up)("q-select");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("td",Te,[(0,i._)("div",De,[(0,i._)("button",{style:{"font-size":"25px"},class:"good-button",onClick:t[0]||(t[0]=e=>n.editTool())},"✔"),(0,i._)("button",{style:{"font-size":"25px"},class:"bad-button",onClick:t[1]||(t[1]=e=>n.endEditMode())},"✖")])],512),(0,i._)("td",Ie,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.tool.Title=e),placeholder:"שם",class:"input"},null,512),[[s.nr,a.tool.Title]])],512),(0,i._)("td",$e,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.tool.ip=e),placeholder:"ip",class:"input"},null,512),[[s.nr,a.tool.ip]])],512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.tool.details.info),((e,t)=>((0,i.wg)(),(0,i.iD)("td",{ref_for:!0,ref:"info"+t,key:t},[(0,i.wy)((0,i._)("input",{placeholder:e,ref_for:!0,ref:"info"+e,class:"input","onUpdate:modelValue":t=>a.tool.details.info[e]=t},null,8,_e),[[s.nr,a.tool.details.info[e]]])])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(a.tool.details.boolChecks),((e,l)=>((0,i.wg)(),(0,i.iD)("td",{ref_for:!0,ref:"boolCheck"+l,key:l,class:"checkbox-bug"},[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":t=>a.tool.details.boolChecks[e]=t,type:"checkbox",checked:a.tool.details.boolChecks[e],ref_for:!0,ref:a.tool.Title+"boolcheck"+l,onChange:t[4]||(t[4]=e=>n.atListOneBoolCheckFalse())},null,40,Le),[[s.e8,a.tool.details.boolChecks[e]]])])))),128)),(0,i._)("td",Se,[o.delayCauseFlag?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"sizing",modelValue:a.tool.delayCause,"onUpdate:modelValue":[t[5]||(t[5]=e=>a.tool.delayCause=e),t[6]||(t[6]=e=>{n.updateDelayCause(e)})],dark:"",color:"white",options:o.reasonsArray,ref:"DelayInput"},null,8,["modelValue","options"])):(0,i.kq)("",!0)],512),(0,i._)("td",je,[(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>a.tool.comments=e),"max-rows":"3",placeHolder:"      הכנס הערה",maxlength:"45",class:"comments-input"},null,512),[[s.nr,a.tool.comments]])],512)],64)}var qe={props:["tool","isFirst","tdWidth"],name:"EditToolTds",data(){return{reasonsArray:["soc","pc",'תקנ"ם',"VIP",'מצודה וחמ"לים',"סיסטם","VC","מחכים לציוד","אחר"],Ystyle:{"--clip-path":"polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)","--shadow-color":"rgb(104, 243, 76)"},Xstyle:{"--clip-path":"polygon(20% 0%,0% 20%, 30% 50%,0% 80%,20% 100%, 50% 70%, 80% 100%, 100% 80%, 70% 50%,100% 20%, 80% 0%, 50% 30%)","--shadow-color":"rgb(236, 71, 71)"},newvalUrl:"http://127.0.0.1:8000",toolData:{},oldToolData:{},delayCauseFlag:!1}},methods:{setWidthTables(e){this.setter("td",e)},setter(e,t){var a=""+97/t;a+="vw";const s=[];s.push(this.$refs["edit-table"]),s.push(this.$refs["name-td"]),s.push(this.$refs["ip-td"]),Object.keys(this.tool.details.info).forEach(((e,t)=>{s.push(this.$refs["info"+t][0])})),Object.keys(this.tool.details.boolChecks).forEach(((e,t)=>{s.push(this.$refs["boolCheck"+t][0])})),s.push(this.$refs["delay-cause"]),s.push(this.$refs["comment"]),s.forEach((e=>{e.style.setProperty("--width-var",a)}))},async editTool(){console.log(this.isFirst);await me().PutTool(this.$props["tool"]);this.reloadItems(),this.isFirst&&!this.$isDjango&&location.reload(),this.endEditMode()},endEditMode(){this.$emit("end-edit-mode")},reloadItems(){this.$emit("reload-items",this.isFirst)},updateDelayCause(e,t){},updateReport(e,t,a,s){},updateLocal(e,t){},updateBoolChecks(e){},atListOneBoolCheckFalse(){let e=!1;const t=this,a=this.$props["tool"].details.boolChecks;Object.keys(a).map((function(s,i){0==a[s]&&(e=!0),t.delayCauseFlag=e}))}},beforeMount(){},mounted(){this.setWidthTables(this.tdWidth),this.toolData=this.$props["tool"],this.oldToolData="Object.assign({},this.$props['tool'])",this.atListOneBoolCheckFalse()},unmounted(){}};const Ne=(0,o.Z)(qe,[["render",Oe],["__scopeId","data-v-0a33bcae"]]);var Fe=Ne;k()(qe,"components",{QSelect:ke.Z});var xe={props:["newTable","type","hamal"],name:"TableSlide",data(){return{reasonsArray:["soc","pc",'תקנ"ם',"VIP",'מצודה וחמ"לים',"סיסטם","VC","מחכים לציוד","אחר"],flag:!1,deme:"",header:"",table:{},labels:{},model:["soc"],tdWidth:"",label:"בחר",isInfo:!1,boolChecks:[],Ystyle:{"--clip-path":"polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)","--shadow-color":"rgb(104, 243, 76)"},Xstyle:{"--clip-path":"polygon(20% 0%,0% 20%, 30% 50%,0% 80%,20% 100%, 50% 70%, 80% 100%, 100% 80%, 70% 50%,100% 20%, 80% 0%, 50% 30%)","--shadow-color":"rgb(236, 71, 71)"},submitArr:[],tabKey:0,editModeId:-1,reupdateToolData:{}}},components:{AddTool:fe,DeleteEditBtns:Ce,EditToolMode:Fe},methods:{asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},async reupdateTool(e){this.reupdateToolData=await this.asyncParse(this.reupdateToolData);for(let t=0;t<this.table.length;t++)this.reupdateToolData.id==this.table[t].id&&(this.table[t]=this.reupdateToolData)},deleteItem(e){const t=this.table.findIndex((t=>t.id==e));this.table.splice(t,1),this.$swal.hideLoading(),this.$swal.close(),this.$emit("reload-items",!1)},addItem(e){this.table.push(e),this.$swal.hideLoading(),this.$swal.close(),console.log("here"),this.$emit("reload-items",!1)},reloadWithParam(e){console.log(e),this.tabKey+=1,e&&this.$emit("reload-items",e)},reloadItems(e){console.log(e),this.tabKey+=1,e&&this.$emit("reload-items",e)},startEditMode(e,t){this.editModeId=e,this.reupdateToolData=JSON.stringify(t)},endEditMode(){this.editModeId=-1},updateLocal(e,t){this.$emit("on-comment",e,t)},setter(e,t){var a=""+97/t;a+="vw";var s=this.$refs[this.header].getElementsByTagName(e);[...s].forEach((e=>{e.style.setProperty("--width-var",a)}))},setWidthTables(e){this.setter("td",e),this.setter("th",e)},promiseParse(){var e=this;return new Promise(((t,a)=>{for(var s=0;s<e.table.length;s++)e.table[s]["details"]=JSON.parse(e.table[s]["details"]);e.isInfo=!!e.table[0].details.info,t(e.table)}))},updateDelayCause(e,t){this.submitArr.forEach((a=>{a.Title==t&&(a.delayCause=e)})),this.$emit("on-delay",e,t)},changeLabelAndUpdateData(e,t,a){e["delayCause"]=a,this.submitArr.forEach((e=>{e.Title==t&&(e.delayCause=a)}))},setCheckedIcons(e){e.checked?(e.style.setProperty("--clip-path","polygon(20% 0%,0% 20%, 30% 50%,0% 80%,20% 100%, 50% 70%, 80% 100%, 100% 80%, 70% 50%,100% 20%, 80% 0%, 50% 30%)"),e.style.setProperty("--shadow-color","rgb(236, 71, 71)")):(e.style.setProperty("--clip-path","polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)"),e.style.setProperty("--shadow-color","rgb(104, 243, 76)"))},openModal(e){var t=this;this.submitArr.forEach(((a,s)=>{a.Title==e&&(s,t.$swal({title:"הערות"+a.Title,input:"textarea",direction:"rtl",inputPlaceholder:"הזן הערות",inputClass:"direction-class",confirmButtonText:"עדכן",confirmButtonColor:"#7393b3"}).then((e=>{e.value})))}))},updateReport(e,t,a,s){t[a]=!t[a],this.setCheckedIcons(e.target),this.checkIfTakul(t)||(this.submitArr.forEach((e=>{e.Title==s.Title&&(e.delayCause="")})),s.delayCause="");var i=this.submitArr;this.$emit("on-failure",i)},checkIfTakul(e){return!!Object.keys(e).some((t=>!e[t]))},createSubmitArr(){for(var e=0;e<this.table.length;e++){var t=this.table[e];this.isInfo?this.submitArr.push({ip:t.ip,comments:t.comments,delayCause:t.delayCause,Title:this.table[e].Title,type:t.type,details:{info:t.details.info,boolChecks:t.details.boolChecks}}):this.submitArr.push({ip:t.ip,comments:t.comments,delayCause:t.delayCause,Title:this.table[e].Title,type:t.type,details:{boolChecks:t.details.boolChecks}})}}},async beforeMount(){this.table=this.newTable,sessionStorage.getItem(this.type)||(sessionStorage.setItem(this.type+"deme",JSON.stringify(this.table[0]["details"])),sessionStorage.setItem(this.type,Object.keys(this.table[0]["details"]["boolChecks"]).length+Object.keys(this.table[0]["details"]["info"]).length+5)),this.deme=await this.asyncParse(sessionStorage.getItem(this.type+"deme")),this.createSubmitArr(),"דוחס"==this.type&&(this.header="דוחסים"),"עמדת שליטה"==this.type&&(this.header="עמדת שליטה"),"פורס"==this.type&&(this.header="פורסים"),"vc"==this.type&&(this.header="ערכת vc"),this.submitArr.forEach((e=>{this.checkIfTakul(e.details.boolChecks)||(e.delayCause="")})),this.table.forEach((e=>{this.checkIfTakul(e.details.boolChecks)||(e.delayCause="")}))},mounted(){this.flag=!1,this.tdWidth=sessionStorage.getItem(this.type),this.setWidthTables(this.tdWidth),this.flag=!0}};const Ve=(0,o.Z)(xe,[["render",B],["__scopeId","data-v-b67c2070"]]);var Ee=Ve;k()(xe,"components",{QSelect:ke.Z});var ze={props:["tools","hamal","checkDetails","hamalId"],name:"ToolsTable",data(){return{flag:!1,isFinished:!1,checkOutList:[],sliders:"עמדת שליטה",tableSlide:"",options:[]}},components:{TableSlide:Ee},methods:{reloadItems(e){console.log("reloaded-carousel"),this.$emit("reload-items",e)},passDelayCause(e,t){this.$emit("on-delay",e,t)},passComment(e,t){this.$emit("on-comm",e,t)},passBoolcheck(e){this.$emit("onCheckout",e,this.hamal)},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},func(){this.isFinished=!1},updateDelayCauses(e,t){e=e.forEach((e=>{e.Title==t.Title&&(e.delayCause=t.delayCause)}))},manageArray(){this.finalTools={},this.tools.forEach((e=>{this.finalTools[e["type"]]?this.finalTools[e["type"]].push(e):this.finalTools[e["type"]]=[e]}))}},async mounted(){this.manageArray(),console.log("carousel"),Object.keys(this.finalTools).forEach((e=>{this.options.push({label:e,value:e})})),this.sliders=this.options[0].value,this.flag=!0}},Pe=a(18362),Ae=a(13535),Me=a(93477);const Ue=(0,o.Z)(ze,[["render",S],["__scopeId","data-v-5af4b518"]]);var He=Ue;k()(ze,"components",{QBtnToggle:Pe.Z,QCarousel:Ae.Z,QCarouselSlide:Me.Z});var Be=a(95538),Re=a.n(Be),Ze={name:"Check",props:[],data(){return{date:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),pages:"0",sliders:"0",tools:[],options:[],flag:!1,checkName:"",isFinished:!1,hamalsList:"",checkId:"",finalTools:"",location:"",isSpinner:!0,checkOutList:[],userName:"",mahlaka:"",urlForHamalsLocal:`${this.$url}`,urlForToolsLocal:`${this.$url}`,newvalUrl:`${this.$url}`,chosenValue:"",tabKey:0}},beforeMount(){window.addEventListener("beforeunload",(()=>{this.checkOutList.length>0&&localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),this.hamalsList&&localStorage.setItem("tools",JSON.stringify(this.hamalsList))}),{once:!0})},beforeUnmount(){this.theBeforeMountedFunction(),this.isSpinner=!1},async mounted(){this.theMountedFunction()},components:{Carousel:He},methods:{newReloadFunc(e){this.theMountedFunction(e)},async getToolsDjango(){console.log("reloaded"),this.changePic(this.$route.params["location"]),this.checkId=this.$route.params["checkId"];var e=await de().get(this.urlForHamalsLocal+`/hamal/check/${this.checkId}/`,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});e=e.data.map((e=>{var t={};return t[e["hamalId"]]=e["Title"],t}));var t=[...e];t=await de().all(t.map((e=>de().get(this.urlForToolsLocal+`/tool/hamal/${Object.keys(e)[0]}/`,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}})))),t=t.map((e=>e.data)),t=t.map((t=>{var a=t[0].hamalId;const s=e.filter((e=>Object.keys(e)[0]==a))[0][a];return{hamalName:s,tools:[...t]}})),this.hamalsList=[...t],this.changePic('בניין מטכ"ל'),this.options.length||(this.hamalsList.forEach((e=>{this.options.push({label:e.hamalName,value:e.hamalName})})),this.sliders=this.options[0].value),this.flag=!0,this.isSpinner=!1},async getToolsSp(){this.changePic('בניין מטכ"ל'),this.checkId=this.$route.params["checkId"];var e=await de().get(this.newvalUrl+"/_api/web/lists/getbyTitle('rooms')/items",{params:{$filter:`checkId eq '${this.checkId}'`}});e=e.data.value.map((e=>{var t={};return t[e["hamalId"]]=e["Title"],t}));var t=[...e];t=await de().all(t.map((e=>{const t=Object.keys(e)[0];return de().get(this.newvalUrl+"/_api/web/lists/getbyTitle('trialList2')/items",{params:{$filter:`hamalId eq '${t}'`}})}))),t=t.map((e=>e.data.value)),t=t.map((t=>{var a=t[0].hamalId;t.forEach((e=>{e.id=e.Id}));const s=e.filter((e=>Object.keys(e)[0]==a))[0][a];return{hamalName:s,tools:[...t]}})),this.hamalsList=[...t],this.hamalsList=await this.asyncParsedJson(),this.options.length||(this.hamalsList.forEach((e=>{this.options.push({label:e.hamalName,value:e.hamalName})})),this.sliders=this.options[0].value),this.isSpinner=!1,this.flag=!0},asyncParsedJson(){return Promise.all(this.hamalsList.map((e=>Promise.all(e.tools.map((e=>new Promise(((t,a)=>{t(JSON.parse(e.details))})).then((t=>(e.details=t,e)))))).then((t=>(e.tools=[...t],e))))))},getCheckIdkByCheckLocal(e){return de().get(this.newvalUrl+"/check/name/"+e+"/")},getHamalIdByTitleLocal(e){return de().get(this.newvalUrl+"/hamal/check/"+e+"/")},getToolsByHamalIdLocal(e){return de().get(this.newvalUrl+"/tool/hamal/"+e+"/")},asyncStringify(e){return new Promise(((t,a)=>{t(JSON.stringify(e))}))},updateDelay(e,t){this.checkOutList.forEach((a=>{a.Title==t&&(a.delayCause=e)})),localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),localStorage.getItem("checkout-list")},updateLocal(e,t){this.checkOutList.forEach((a=>{a.Title==e&&(a.comments=t)})),localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),localStorage.getItem("checkout-list")},handlePass(e){this.$refs["maincar"].goTo(e)},func(){this.isFinished=!1},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},checkIfItemInArray(e,t){var a=!1;return e.forEach((e=>{e.Title==t&&(a=!0)})),a},checkIfTakul(e){return!!Object.keys(e).some((t=>!e[t]))},updateDelayCausesAndBoolChecks(e,t){e=e.forEach((e=>{e.Title==t.Title&&(e.delayCause=t.delayCause)}))},changePic(e){const t=this.$refs.background;"מצודת ציון"==e&&t.classList.add("mezudat-zion"),'בניין מטכ"ל'==e&&t.classList.add("binyan-zahal"),"מרגנית"==e&&t.classList.add("marganit")},handlerFunc(e,t){var a,s,i=[],l=[];e.forEach((e=>{e["hamal"]=t,a=this.checkIfItemInArray(this.checkOutList,e.Title),s=this.checkIfTakul(e.details.boolChecks),!a&&s&&i.push(e),a&&s&&(this.updateDelayCausesAndBoolChecks(this.checkOutList,e),this.checkOutList.forEach((t=>{t.Title==e.Title&&(t.details.boolChecks={...e.details.boolChecks})}))),a&&!s&&l.push(e)})),l.forEach((e=>{this.checkOutList=this.checkOutList.filter((t=>t.Title!==e.Title))})),this.checkOutList=[...this.checkOutList,...i],localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList))},async theMountedFunction(e){this.changePic('בניין מטכ"ל'),e&&(this.flag=!1),this.$isDjango?this.getToolsDjango():this.getToolsSp()},theBeforeMountedFunction(){localStorage.clear(),this.flag=!1}}};const We=(0,o.Z)(Ze,[["render",$]]);var Je=We;k()(Ze,"components",{QBtnToggle:Pe.Z,QCarousel:Ae.Z,QCarouselSlide:Me.Z});var Ye=a.p+"static/img/tzameret.0d6378d7.png";const Ke=e=>((0,i.dD)("data-v-1c8cc93f"),e=e(),(0,i.Cn)(),e),Qe={class:"pre-input-container binyan-zahal"},Xe=Ke((()=>(0,i._)("h1",{class:"main-title"},' דוחמ"ל',-1))),Ge={class:"report-name-mahlaka-container"},et={class:"flex-input"},tt=Ke((()=>(0,i._)("div",{class:"semel-and-title"},[(0,i._)("div",{class:"developers-container"}," פותח על ידי יובל פורת ושקד בוקעי "),(0,i._)("img",{src:Ye})],-1)));function at(e,t,a,s,l,o){const n=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Qe,[Xe,(0,i._)("div",Ge,[(0,i._)("span",null,(0,_.zw)(l.date),1),(0,i._)("div",et,[(0,i.Wm)(n,{class:"secondary-link",to:{name:"mode",path:"/edit",params:{mode:"edit"}}},{default:(0,i.w5)((()=>[(0,i.Uk)(" ממשק עריכה")])),_:1}),(0,i.Wm)(n,{class:"main-link",to:{name:"mode",path:"/check",params:{mode:"check"}}},{default:(0,i.w5)((()=>[(0,i.Uk)(" ממשק בדיקה")])),_:1})])]),tt])}var st={name:"Main",data(){return{$q:"",isWaitingHamalResponse:!1,isLocalEmpty:!0,userName:"",isFormDialog:!1,date:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),tashtiotString:"תשתיות",hamalsString:'מצודה וחמ"לים',url:`${this.$url}`,isFinished:!1,mahlaka:"VC",hamal:"",hamals:[]}},async mounted(){if(!sessionStorage.getItem("token")&&this.$isDjango){await this.$swal({title:"התחברות",allowOutsideClick:!1,confirmButtonClass:"confirm-btn-class",confirmButtonColor:"#1976D2",html:'<input type="text" id="username"  dir=\'rtl\' class="swal2-input" placeholder="שם משתמש">\n            <input type="password" id="password" dir=\'rtl\'  class="swal2-input" placeholder="סיסמא">\n            ',focusConfirm:!1,preConfirm:async()=>{const e=this.$swal.getPopup().querySelector("#username").value,t=this.$swal.getPopup().querySelector("#password").value;if(e.trim()&&t.trim()){let s;this.$swal.showLoading();try{s=await de().post(this.url+"/token/",{username:e,password:t})}catch(a){400==a.response.status&&(this.$swal.hideLoading(),this.$swal.showValidationMessage("שם משתמש וסיסמא לא נכונים"))}return sessionStorage.setItem("token",s.data.token),{username:e,password:t}}this.$swal.showValidationMessage("הכנס שם משתמש וסיסמא")},confirmButtonText:"התחבר"})}},methods:{},components:{}};const it=(0,o.Z)(st,[["render",at],["__scopeId","data-v-1c8cc93f"]]);var lt=it;const ot=e=>((0,i.dD)("data-v-c99595a8"),e=e(),(0,i.Cn)(),e),nt={key:0,class:"pre-input-container binyan-zahal"},rt={key:0,ref:"options-dialog"},ct=ot((()=>(0,i._)("h2",null," זיהינו שלא סיימת את הדוח ",-1))),ht={class:"dialog-action-buttons-container"},dt={key:1,class:"main-title"},ut={key:2,class:"main-title"},mt={class:"spinner-container"},pt={key:0,class:"spinner-border text-light loading-hamal-spinner"},kt={key:3,class:"report-name-mahlaka-container"},gt={key:0},ft={key:1},yt={class:"flex-input"},bt=ot((()=>(0,i._)("option",{value:"VC"},"VC ",-1))),wt=["value"],vt=ot((()=>(0,i._)("option",{value:"VIP"},"VIP ",-1))),Ct=["value"],Tt={key:0},Dt={key:4,class:"connection-flex"},It={key:0},$t=ot((()=>(0,i._)("span",{class:"bi bi-wifi internet"},null,-1))),_t=[$t],Lt={key:1},St=ot((()=>(0,i._)("span",{class:"bi bi-wifi-off no-internet"},null,-1))),jt=[St],Ot=ot((()=>(0,i._)("div",{class:"semel-and-title"},[(0,i._)("div",{class:"developers-container"}," פותח על ידי יובל פורת ושקד בוקעי "),(0,i._)("img",{src:Ye})],-1)));function qt(e,t,a,l,o,n){const r=(0,i.up)("HamalForm");return(0,i.wg)(),(0,i.iD)(i.HY,null,[o.isFinished?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",nt,["check"==o.mode?(0,i.wy)(((0,i.wg)(),(0,i.iD)("dialog",rt,[ct,(0,i._)("span",null," בוצע על ידי טכנאי: "+(0,_.zw)(o.userName),1),(0,i._)("span",null,"בתאריך "+(0,_.zw)(o.date),1),(0,i._)("span",null," בחמל "+(0,_.zw)(o.hamal),1),(0,i._)("div",ht,[(0,i._)("button",{class:"continue-report-button",onClick:t[0]||(t[0]=(...e)=>n.routeToCheck&&n.routeToCheck(...e))}," המשך דוח קיים"),(0,i._)("button",{class:"new-report-button",onClick:t[1]||(t[1]=(...e)=>n.toggleInputDialog&&n.toggleInputDialog(...e))}," התחל דוח חדש")])],512)),[[s.F8,!o.isLocalEmpty&&!o.isFormDialog]]):(0,i.kq)("",!0),"edit"==o.mode?((0,i.wg)(),(0,i.iD)("h1",dt," עריכת בדיקה")):(0,i.kq)("",!0),"check"==o.mode?((0,i.wg)(),(0,i.iD)("h1",ut," ביצוע בדיקה")):(0,i.kq)("",!0),(0,i._)("div",mt,[o.isWaitingHamalResponse?((0,i.wg)(),(0,i.iD)("div",pt)):(0,i.kq)("",!0)]),o.isWaitingHamalResponse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",kt,["check"==o.mode?((0,i.wg)(),(0,i.iD)("h2",gt," שלום טכנאי ")):(0,i.kq)("",!0),"edit"==o.mode?((0,i.wg)(),(0,i.iD)("h2",ft," שלום רשץ ")):(0,i.kq)("",!0),(0,i._)("span",null,(0,_.zw)(o.date),1),(0,i._)("div",yt,[(0,i.wy)((0,i._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.mahlaka=e),ref:"mahlakot",class:"form-select form-select-sm categories-class dropdown-menu-right",size:"1","aria-label":".form-select-lg example"},[bt,(0,i._)("option",{value:o.hamalsString},'מצודה וחמ"לים ',8,wt),vt,(0,i._)("option",{value:o.tashtiotString},"תשתיות ",8,Ct)],512),[[s.bM,o.mahlaka]]),"edit"==o.mode?((0,i.wg)(),(0,i.iD)("h3",Tt,"מחלקה:")):(0,i.kq)("",!0),"check"==o.mode?((0,i.wg)(),(0,i.iD)("input",{key:1,type:"text",style:(0,_.j5)({"--shadow-color":"0px 0px 15px 0px rgba(22, 22, 22, 0.192)","--placeholder-color":"grey"}),ref:"name",placeholder:"הקלד שם"},null,4)):(0,i.kq)("",!0)]),(0,i._)("button",{class:"sub-btn",onClick:t[3]||(t[3]=(...e)=>n.saveName&&n.saveName(...e))}," אישור ")])),"check"==o.mode?((0,i.wg)(),(0,i.iD)("div",Dt,[o.isOnline?((0,i.wg)(),(0,i.iD)("div",It,_t)):(0,i.kq)("",!0),o.isOnline?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Lt,jt))])):(0,i.kq)("",!0),Ot])),o.isFinished?((0,i.wg)(),(0,i.j4)(r,{key:1,mode:o.mode,hamals:o.hamals,userName:o.userName,date:o.date,mahlaka:o.mahlaka},null,8,["mode","hamals","userName","date","mahlaka"])):(0,i.kq)("",!0)],64)}const Nt=e=>((0,i.dD)("data-v-3b6e923e"),e=e(),(0,i.Cn)(),e),Ft={class:"container-background",ref:"background"},xt={key:0,class:"connection-flex"},Vt={key:0},Et=Nt((()=>(0,i._)("span",{class:"bi bi-wifi internet"},null,-1))),zt=[Et],Pt={key:1},At=Nt((()=>(0,i._)("span",{class:"bi bi-wifi-off no-internet"},null,-1))),Mt=[At],Ut={key:1,class:"name-block"},Ht={key:2,class:"main-title"},Bt={key:3,class:"main-title"},Rt=Nt((()=>(0,i._)("h3",null,' בחירת חד"ן ',-1))),Zt={class:"carousel-buttons-container"},Wt=Nt((()=>(0,i._)("table",{class:"flex-headers"},[(0,i._)("tr",null,[(0,i._)("td",null,' חד"ן '),(0,i._)("td",null," נבדק לאחרונה ")])],-1)));function Jt(e,t,a,l,o,n){const r=(0,i.up)("q-btn-toggle"),c=(0,i.up)("HamalTable"),h=(0,i.up)("q-carousel-slide"),d=(0,i.up)("q-carousel"),u=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.iD)("div",Ft,["check"==a.mode?((0,i.wg)(),(0,i.iD)("div",xt,[o.isOnline?((0,i.wg)(),(0,i.iD)("div",Vt,zt)):(0,i.kq)("",!0),o.isOnline?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Pt,Mt))])):(0,i.kq)("",!0),"check"==a.mode?(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",Ut,[(0,i._)("span",null,"טכנאי : "+(0,_.zw)(a.userName),1),(0,i._)("span",null," מחלקה : "+(0,_.zw)(a.mahlaka),1),(0,i._)("span",null,(0,_.zw)(o.date),1),(0,i._)("span",null,(0,_.zw)(o.chosenValue),1)],512)),[[s.F8,a.userName]]):(0,i.kq)("",!0),"edit"==a.mode?((0,i.wg)(),(0,i.iD)("h1",Ht," עריכת בדיקה")):(0,i.kq)("",!0),"check"==a.mode?((0,i.wg)(),(0,i.iD)("h1",Bt," ביצוע בדיקה")):(0,i.kq)("",!0),Rt,"check"==a.mode?(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",{key:4,class:(0,_.C_)(["submit-button",{blued:o.isChose}]),ref:"submit-button",onClick:t[0]||(t[0]=(...e)=>n.submitHandler&&n.submitHandler(...e))},[(0,i.Uk)(" התחל בדיקה")],2)),[[u]]):(0,i.kq)("",!0),"edit"==a.mode?(0,i.wy)(((0,i.wg)(),(0,i.iD)("button",{key:5,class:(0,_.C_)(["submit-button",{blued:o.isChose}]),ref:"submit-button",onClick:t[1]||(t[1]=(...e)=>n.submitHandler&&n.submitHandler(...e))},[(0,i.Uk)(" התחל עריכה")],2)),[[u]]):(0,i.kq)("",!0),(0,i._)("div",Zt,[(0,i.Wm)(r,{"onUpdate:modelValue":[n.imageFunc,t[2]||(t[2]=e=>o.sliders=e)],flat:"",size:"1.4rem",modelValue:o.sliders,options:o.options},null,8,["onUpdate:modelValue","modelValue","options"])]),Wt,(0,i.Wm)(d,{ref:"qar",onBeforeTransition:n.imageFuncNew,modelValue:o.sliders,"onUpdate:modelValue":t[3]||(t[3]=e=>o.sliders=e),animated:"",class:"carousel-check","transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",color:"dark",height:"30%"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.locations,(e=>((0,i.wg)(),(0,i.j4)(h,{class:"column no-wrap flex-center p0 ani",name:e.location,key:e.location},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onChangeBlue:n.updateValues,filteredArray:n.getArrayByPlace(e.location)},null,8,["onChangeBlue","filteredArray"])])),_:2},1032,["name"])))),128))])),_:1},8,["onBeforeTransition","modelValue"])],512)}const Yt={class:"table"},Kt=["onClick"],Qt={class:"hamal-lastDateChecked"};function Xt(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)("table",Yt,[(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.filteredArray,(e=>((0,i.wg)(),(0,i.iD)("tr",{tabindex:"-1","v-ripple":!1,marked:!1,onClick:t=>o.markCell(e.Title),ref_for:!0,ref:e.Title+"tr",key:e},[(0,i._)("td",{class:"hamal-title",ref_for:!0,ref:e.Title},(0,_.zw)(e.Title),513),(0,i._)("td",Qt,(0,_.zw)(e.lastDateChecked),1)],8,Kt)))),128))])])}var Gt={name:"HamalTable",props:["filteredArray"],methods:{markCell(e){var t=this.$refs[e][0].innerHTML;this.$refs[e+"tr"][0].focus(),this.$emit("change-blue",t)}}},ea=a(98108);const ta=(0,o.Z)(Gt,[["render",Xt],["__scopeId","data-v-1d605dc3"]]);var aa=ta;k()(Gt,"directives",{Ripple:ea.Z});var sa={props:["mode","hamals","mahlaka","userName"],name:"HamalForm",data(){return{isOnline:navigator.onLine,isLocalEmpty:!0,isFormDialog:!1,filteredArray:[],arr:[],date:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),clickFunc:e=>{var t=e.target;"TD"!=t.tagName&&t!=this.$refs["submit-button"]&&(this.isChose=!1,this.chosenValue="")},chosenLocation:"",options:[{label:'בניין מטכ"ל',value:'בניין מטכ"ל',src:"@/assets/binyan.png"},{label:"מצודת ציון",value:"מצודת ציון",src:"@/assets/binyan.png"},{label:"מרגנית",value:"מרגנית",src:"@/assets/binyan.png"}],chosenValue:"",isChose:!1,locations:[{location:'בניין מטכ"ל',image:""},{location:"מצודת ציון",image:""},{location:"מרגנית",image:""}],sliders:'בניין מטכ"ל',chosenRef:"",newvalUrl:this.$url,chosenValueId:0}},beforeUnmount(){window.removeEventListener("click",this.clickFunc)},components:{HamalTable:aa},methods:{imageFuncNew(e,t){this.chosenLocation=e,this.$refs.qar.goTo(e),"מצודת ציון"==e&&(this.$refs.background.classList.remove("marganit"),this.$refs.background.classList.remove("binyan-zahal"),this.$refs.background.classList.add("mezudat-zion")),'בניין מטכ"ל'==e&&(this.$refs.background.classList.remove("mezudat-zion"),this.$refs.background.classList.remove("marganit"),this.$refs.background.classList.add("binyan-zahal")),"מרגנית"==e&&(this.$refs.background.classList.remove("binyan-zahal"),this.$refs.background.classList.remove("mezudat-zion"),this.$refs.background.classList.add("marganit"))},imageFunc(e){this.chosenLocation=e,this.$refs.qar.goTo(e),"מצודת ציון"==e&&(this.$refs.background.classList.remove("marganit"),this.$refs.background.classList.remove("binyan-zahal"),this.$refs.background.classList.add("mezudat-zion")),'בניין מטכ"ל'==e&&(this.$refs.background.classList.remove("mezudat-zion"),this.$refs.background.classList.remove("marganit"),this.$refs.background.classList.add("binyan-zahal")),"מרגנית"==e&&(this.$refs.background.classList.remove("binyan-zahal"),this.$refs.background.classList.remove("mezudat-zion"),this.$refs.background.classList.add("marganit"))},asyncStringify(e){return new Promise(((t,a)=>{t(JSON.stringify(e))}))},updateValues(e){console.log(e),this.isChose=!0,this.chosenValue=e},getCheckIdkByCheckSp(e){return de().get(this.newvalUrl+"/_api/web/lists/getByTitle('checks')/items",{params:{$filter:`Title eq '${e}' and mahlaka eq '${this.mahlaka}'`,$top:1,$select:"checkId"}})},getCheckIdkByCheckDjango(e){return de().get(this.newvalUrl+"/check/name/"+e+"/mahlaka/"+this.mahlaka+"/",{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}})},getHamalIdByTitleLocal(e){return de().get(this.newvalUrl+"/hamal/check/"+e+"/")},getToolsByHamalIdLocal(e){return de().get(this.newvalUrl+"/tool/hamal/"+e+"/")},async getStuffSp(){var e=await this.getCheckIdkByCheckSp(this.chosenValue),t=e.data.value[0]["checkId"];localStorage.setItem("route-params",JSON.stringify({mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t})),this.$router.push({path:`/${t}`,name:this.mode,params:{mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t}})},async getStuffDjango(){var e=await this.getCheckIdkByCheckDjango(this.chosenValue),t=e.data[0]["id"];localStorage.setItem("route-params",JSON.stringify({mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t})),this.$router.push({path:`/${t}`,name:this.mode,params:{mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t}})},async getStuffDjangoEdit(){var e=await this.getCheckIdkByCheckDjango(this.chosenValue),t=e.data[0]["id"];localStorage.setItem("route-params",JSON.stringify({mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t})),this.$router.push({path:`/${t}`,name:"edit",params:{mahlaka:this.mahlaka,userName:this.userName,location:this.chosenLocation,checkName:this.chosenValue,checkId:t}});var a=await this.getHamalIdByTitleLocal(t);a=a.data.map((e=>{var t={};return t[e["hamalId"]]=e["Title"],t}));var s=[...a];s=await de().all(s.map((e=>this.getToolsByHamalIdLocal(Object.keys(e)[0])))),s=s.map((e=>e.data)),s=s.map((e=>{var t=e[0].hamalId;const s=a.filter((e=>Object.keys(e)[0]==t))[0][t];return{hamalName:s,tools:[...e]}}))},getArrayByPlace(e){this.filteredArray=this.arr;var t=[];return this.filteredArray.forEach((a=>{a.location==e&&t.push(a)})),t},async submitHandler(){if(window.navigator.onLine){try{await this.sendRandomRequest()}catch{return void this.noConnectionSwal(this.$swal)}this.$isDjango?this.getStuffDjango():this.getStuffSp()}else this.noConnectionSwal(this.$swal)},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},filteringFunc(){var e=this.$refs["input"].value.trim();this.filteredArray=this.arr,this.filteredArray=this.filteredArray.filter((t=>t.Title.trim().includes(e)||t.location.trim().includes(e)))}},async mounted(){this.imageFunc('בניין מטכ"ל'),this.arr=this.hamals,this.isMobile=window.screen.availHeight<1e3,window.addEventListener("click",this.clickFunc)}};const ia=(0,o.Z)(sa,[["render",Jt],["__scopeId","data-v-3b6e923e"]]);var la=ia;k()(sa,"components",{QBtnToggle:Pe.Z,QCarousel:Ae.Z,QCarouselSlide:Me.Z}),k()(sa,"directives",{Ripple:ea.Z});var oa={name:"Main",data(){return{isOnline:navigator.onLine,$q:"",isWaitingHamalResponse:!1,isLocalEmpty:!0,userName:"",isFormDialog:!1,date:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),tashtiotString:"תשתיות",hamalsString:'מצודה וחמ"לים',djangoLocalUrl:`${this.$url}`,urlForChecks:`${this.$url}/`,urlForReports:`${this.$url}/`,mode:"",isFinished:!1,mahlaka:"VC",hamal:"",hamals:[]}},beforeMount(){this.mode=this.$route.params.mode},async mounted(){var e;this.addConnectionsEventListeners();var t=localStorage.getItem("route-params");t?(this.isLocalEmpty=!1,e=await this.asyncParse(t),this.userName=e["userName"],this.hamal=e["checkName"],this.$refs["options-dialog"].showModal()):(this.$refs["options-dialog"].close(),this.isFormDialog=!0)},methods:{getRandomString(){return Math.random().toString(36).substring(2,15)},showStatus(){navigator.onLine?(this.isOnline=!0,this.$q.notify({message:"זוהה אינטרנט",type:"positive"})):(this.isOnline=!1,this.$q.notify({message:"אין אינטרנט",type:"negative"}))},addConnectionsEventListeners(){window.ononline=this.showStatus,window.onoffline=this.showStatus},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},closeDialogWithAnimation(e){e.classList.add("disppear-class");var t=()=>{e.close(),e.removeEventListener("animationend",t),this.isFormDialog=!0};e.addEventListener("animationend",t,{once:!0})},async saveName(){if(window.navigator.onLine){try{await this.sendRandomRequest()}catch{return void this.noConnectionSwal(this.$swal)}if("check"==this.mode){var e=()=>{this.$refs["name"].placeholder="הקלד שם",this.$refs["name"].style.setProperty("--placeholder-color","grey"),this.$refs["name"].style.setProperty("--shadow-color","0px 0px 15px 0px rgba(22, 22, 22, 0.192)"),this.$refs.name.removeEventListener("click",e)};this.$refs["name"].value.trim()?(this.userName=this.$refs["name"].value,localStorage.clear(),this.getHamals()):(this.$refs["name"].value="",this.$refs["name"].placeholder="יש להכניס שם לפני אישור",this.$refs["name"].style.setProperty("--placeholder-color","red"),this.$refs["name"].style.setProperty("--shadow-color","0px 0px 15px 0px rgba(243, 3, 3, 0.795)"),this.$refs.name.addEventListener("click",e,{once:!0}))}else this.getHamals()}else this.noConnectionSwal(this.$swal)},async routeToCheck(){const e=await this.asyncParse(localStorage.getItem("route-params"));this.$router.push({path:`/${localStorage.getItem("route-params")["checkId"]}`,params:{checkId:e["checkId"]},name:"check"})},toggleInputDialog(){localStorage.clear(),this.closeDialogWithAnimation(this.$refs["options-dialog"])},async getHamals(){let e,t,a={};this.isWaitingHamalResponse=!0,this.$isDjango?(e=await de().get(this.urlForChecks+`check/mahlaka/${this.mahlaka}/`,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}}),this.hamals=e.data,t=await de().get(this.urlForReports+"report/",{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}}),t=t.data.filter((e=>e.mahlaka==this.mahlaka)),t.forEach((e=>{if(a.hasOwnProperty(e.checkId)){var t=new Date(e.submitDate);t.getTime()>a[e.checkId].getTime()&&(a[e.checkId]=new Date(e.submitDate))}else a[e.checkId]=new Date(e.submitDate)})),this.hamals.forEach((e=>{a.hasOwnProperty(e.checkId)&&(e.lastDateChecked=Re()(new Date(a[e.checkId]),"LLLL","he").format("DD/MM יום dddd "))}))):(e=await de().get(this.urlForChecks+"_api/web/lists/getbytitle('checks')/items",{params:{$filter:`mahlaka eq '${this.mahlaka}'`}}),this.hamals=e.data.value,t=await de().get(this.urlForReports+"_api/web/lists/getbytitle('reports')/items",{params:{$filter:`mahlaka eq '${this.mahlaka}'`,$select:"submitDate,check,submitter",$orderby:"submitDate desc,check"}}),t=t.data.value,console.log(t),t.forEach((e=>{if(a.hasOwnProperty(e.check)){var t=new Date(e.submitDate);t.getTime()>a[e.check].getTime()&&(a[e.check]=new Date(e.submitDate))}else a[e.check]=new Date(e.submitDate)})),console.log(a),this.hamals.forEach((e=>{a.hasOwnProperty(e.Title)&&(e.lastDateChecked=Re()(new Date(a[e.Title]),"LLLL","he").format("DD/MM יום dddd "))}))),this.isFinished=!0}},components:{HamalForm:la}};const na=(0,o.Z)(oa,[["render",qt],["__scopeId","data-v-c99595a8"]]);var ra=na;const ca={class:"main-container",ref:"background"},ha={class:"spinner-container"},da={key:0,class:"spinner-border text-light loading-hamal-spinner"},ua={class:"hamals-container"},ma={class:"finish-link-container"},pa=(0,i._)("span",{class:"bi bi-arrow-right"},null,-1),ka=(0,i._)("span",{class:"bi bi-arrow-left"},null,-1);function ga(e,t,a,s,l,o){const n=(0,i.up)("q-btn-toggle"),r=(0,i.up)("CarouselCheck"),c=(0,i.up)("q-carousel-slide"),h=(0,i.up)("q-carousel"),d=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",ca,[(0,i._)("div",ha,[l.isSpinner?((0,i.wg)(),(0,i.iD)("div",da)):(0,i.kq)("",!0)]),(0,i._)("div",ua,[(0,i.Wm)(n,{flat:"",size:"1.5rem",modelValue:l.sliders,"onUpdate:modelValue":t[0]||(t[0]=e=>l.sliders=e),options:l.options},null,8,["modelValue","options"])]),l.flag?((0,i.wg)(),(0,i.j4)(h,{key:0,ref:"maincar",modelValue:l.sliders,"onUpdate:modelValue":t[1]||(t[1]=e=>l.sliders=e),animated:"","transition-prev":"slide-right","transition-next":"slide-left",arrows:"",class:"background-colors","control-color":"white",color:"white",height:"730px"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.hamalsList,((t,a)=>((0,i.wg)(),(0,i.j4)(c,{key:a,name:t.hamalName,class:"column no-wrap it"},{default:(0,i.w5)((()=>["vc"==e.$mahlaka?((0,i.wg)(),(0,i.j4)(r,{key:0,onOnDelay:o.updateDelay,onOnComm:o.updateLocal,onOnBoolcheck:o.boolCheckChangeHandler,hamal:t.hamalName,tools:t.tools},null,8,["onOnDelay","onOnComm","onOnBoolcheck","hamal","tools"])):(0,i.kq)("",!0)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])):(0,i.kq)("",!0),(0,i._)("div",ma,[(0,i.Wm)(d,{class:"proceed-link",to:{path:"check/final",name:"final",params:{checkDetails:JSON.stringify({location:3,userName:l.userName,mahlaka:l.mahlaka,date:l.date,checkName:l.checkName,checkId:l.checkId})}}},{default:(0,i.w5)((()=>[(0,i.Uk)(" המשך "),pa])),_:1},8,["to"]),(0,i.Wm)(d,{class:"to-main-menu-link",to:"/"},{default:(0,i.w5)((()=>[ka,(0,i.Uk)("לעמוד הבית ")])),_:1})])],512)}const fa={class:"posi"};function ya(e,t,a,s,l,o){const n=(0,i.up)("q-btn-toggle"),r=(0,i.up)("TableSlideCheck"),c=(0,i.up)("q-carousel-slide"),h=(0,i.up)("q-carousel");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("h3",null,(0,_.zw)(a.hamal),1),(0,i._)("div",fa,[(0,i.Wm)(n,{flat:"",size:"1.5rem",modelValue:l.sliders,"onUpdate:modelValue":t[0]||(t[0]=e=>l.sliders=e),options:l.options},null,8,["modelValue","options"]),l.flag?((0,i.wg)(),(0,i.j4)(h,{key:0,ref:"qar",modelValue:l.sliders,"onUpdate:modelValue":t[1]||(t[1]=e=>l.sliders=e),animated:"","transition-prev":"slide-right","transition-next":"slide-left",swipeable:"",class:"background-colors","control-color":"white",color:"white",height:"86%"},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(e.finalTools),((t,s)=>((0,i.wg)(),(0,i.j4)(c,{key:s,name:t,class:"column no-wrap marg"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{onOnDelay:o.passDelayCause,onOnComment:o.passComment,onOnBoolcheck:o.passBoolcheck,hamal:a.hamal,newTable:e.finalTools[t],type:t},null,8,["onOnDelay","onOnComment","onOnBoolcheck","hamal","newTable","type"])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])):(0,i.kq)("",!0)])],64)}const ba=e=>((0,i.dD)("data-v-0ab68573"),e=e(),(0,i.Cn)(),e),wa=ba((()=>(0,i._)("th",null," שם הרכיב",-1))),va=ba((()=>(0,i._)("th",null,"כתובת ip ",-1))),Ca=ba((()=>(0,i._)("th",null," גורם מעכב",-1))),Ta=ba((()=>(0,i._)("th",null," עוד מידע",-1))),Da={class:"tool-title-container"},Ia=["checked","onChange"],$a={class:"comments"},_a=["onInput","onUpdate:modelValue"];function La(e,t,a,l,o,n){const r=(0,i.up)("q-select");return(0,i.wy)(((0,i.wg)(),(0,i.iD)("table",{class:"table",ref:o.header},[(0,i._)("thead",null,[(0,i._)("tr",null,[wa,va,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(o.table[0].details.info),(e=>((0,i.wg)(),(0,i.iD)("th",{key:e},(0,_.zw)(e),1)))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(o.table[0].details.boolChecks),(e=>((0,i.wg)(),(0,i.iD)("th",{key:e},(0,_.zw)(e),1)))),128)),Ca,Ta])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.table,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i._)("td",null,[(0,i._)("span",Da,(0,_.zw)(e.Title),1)]),(0,i._)("td",null,(0,_.zw)(e.ip),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(e.details.info),((t,a)=>((0,i.wg)(),(0,i.iD)("td",{key:a,class:"checkbox-bug"},(0,_.zw)(e.details.info[t]),1)))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(e.details.boolChecks),((t,a)=>((0,i.wg)(),(0,i.iD)("td",{key:a,class:"checkbox-bug"},[(0,i._)("input",{type:"checkbox",checked:!e.details.boolChecks[t],style:(0,_.j5)(e.details.boolChecks[t]?o.Ystyle:o.Xstyle),onChange:a=>n.updateReport(a,e.details.boolChecks,t,e)},null,44,Ia)])))),128)),(0,i._)("td",null,[Object.keys(e.details.boolChecks).some((t=>!e.details.boolChecks[t]))?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"sizing",value:e.delayCause,dark:"",color:"white","onUpdate:modelValue":[t=>{n.updateDelayCause(t,e.Title)},t=>e.delayCause=t],modelValue:e.delayCause,options:o.reasonsArray},null,8,["value","onUpdate:modelValue","modelValue","options"])):(0,i.kq)("",!0)]),(0,i._)("td",$a,[(0,i.wy)((0,i._)("textarea",{"max-rows":"3",onInput:t=>n.updateLocal(e.Title,e.comments),placeHolder:"      הכנס הערה",maxlength:"45",class:"comments-input","onUpdate:modelValue":t=>e.comments=t},"\r\n                              ",40,_a),[[s.nr,e.comments]])])])))),128))])],512)),[[s.F8,o.flag]])}var Sa={props:["newTable","type","hamal"],name:"TableSlide",data(){return{reasonsArray:["soc","pc",'תקנ"ם',"VIP",'מצודה וחמ"לים',"סיסטם","VC","מחכים לציוד","אחר"],flag:!1,header:"",table:{},labels:{},model:["soc"],label:"בחר",isInfo:!1,boolChecks:[],Ystyle:{"--clip-path":"polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)","--shadow-color":"rgb(104, 243, 76)"},Xstyle:{"--clip-path":"polygon(20% 0%,0% 20%, 30% 50%,0% 80%,20% 100%, 50% 70%, 80% 100%, 100% 80%, 70% 50%,100% 20%, 80% 0%, 50% 30%)","--shadow-color":"rgb(236, 71, 71)"},submitArr:[]}},methods:{updateLocal(e,t){this.$emit("on-comment",e,t)},setter(e,t){var a=""+90/t;a+="vw";var s=this.$refs[this.header].getElementsByTagName(e);[...s].forEach((e=>{e.style.setProperty("--width-var",a)}))},setWidthTables(e){this.setter("td",e),this.setter("th",e)},promiseParse(){var e=this;return new Promise(((t,a)=>{for(var s=0;s<e.table.length;s++)e.table[s]["details"]=JSON.parse(e.table[s]["details"]);e.isInfo=!!e.table[0].details.info,t(e.table)}))},updateDelayCause(e,t){this.submitArr.forEach((a=>{a.Title==t&&(a.delayCause=e)})),this.$emit("on-delay",e,t)},changeLabelAndUpdateData(e,t,a){e["delayCause"]=a,this.submitArr.forEach((e=>{e.Title==t&&(e.delayCause=a)}))},setCheckedIcons(e){e.checked?(e.style.setProperty("--clip-path","polygon(20% 0%,0% 20%, 30% 50%,0% 80%,20% 100%, 50% 70%, 80% 100%, 100% 80%, 70% 50%,100% 20%, 80% 0%, 50% 30%)"),e.style.setProperty("--shadow-color","rgb(236, 71, 71)")):(e.style.setProperty("--clip-path","polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)"),e.style.setProperty("--shadow-color","rgb(104, 243, 76)"))},openModal(e){var t=this;this.submitArr.forEach(((a,s)=>{a.Title==e&&(s,t.$swal({title:"הערות"+a.Title,input:"textarea",direction:"rtl",inputPlaceholder:"הזן הערות",inputClass:"direction-class",confirmButtonText:"עדכן",confirmButtonColor:"#7393b3"}).then((e=>{e.value})))}))},updateReport(e,t,a,s){t[a]=!t[a],this.setCheckedIcons(e.target),this.checkIfTakul(t)||(this.submitArr.forEach((e=>{e.Title==s.Title&&(e.delayCause="")})),s.delayCause=""),this.$emit("on-boolcheck",this.submitArr)},checkIfTakul(e){return!!Object.keys(e).some((t=>!e[t]))},createSubmitArr(){for(var e=0;e<this.table.length;e++){var t=this.table[e];this.isInfo?this.submitArr.push({ip:t.ip,comments:t.comments,delayCause:t.delayCause,Title:this.table[e].Title,type:t.type,details:{info:t.details.info,boolChecks:t.details.boolChecks}}):this.submitArr.push({ip:t.ip,comments:t.comments,delayCause:t.delayCause,Title:this.table[e].Title,type:t.type,details:{boolChecks:t.details.boolChecks}})}}},async beforeMount(){this.table=[...this.newTable],"string"==typeof this.table[0]["details"]&&(this.table=await this.promiseParse()),this.createSubmitArr(),"דוחס"==this.type&&(this.header="דוחסים"),"עמדת שליטה"==this.type&&(this.header="עמדת שליטה"),"פורס"==this.type&&(this.header="פורסים"),"vc"==this.type&&(this.header="ערכת vc"),this.submitArr.forEach((e=>{this.checkIfTakul(e.details.boolChecks)||(e.delayCause="")})),this.table.forEach((e=>{this.checkIfTakul(e.details.boolChecks)||(e.delayCause="")})),this.flag=!0},mounted(){this.setWidthTables(Object.keys(this.table[0]["details"]["boolChecks"]).length+Object.keys(this.table[0]["details"]["info"]).length+4)}};const ja=(0,o.Z)(Sa,[["render",La],["__scopeId","data-v-0ab68573"]]);var Oa=ja;k()(Sa,"components",{QSelect:ke.Z});var qa={props:["tools","hamal","checkDetails"],name:"ToolsTable",data(){return{flag:!1,isFinished:!1,checkOutList:[],sliders:"עמדת שליטה",tableSlide:"",options:[]}},components:{TableSlideCheck:Oa},methods:{passDelayCause(e,t){this.$emit("on-delay",e,t)},passComment(e,t){this.$emit("on-comm",e,t)},passBoolcheck(e){this.$emit("on-boolcheck",e,this.hamal)},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},func(){this.isFinished=!1},updateDelayCauses(e,t){e=e.forEach((e=>{e.Title==t.Title&&(e.delayCause=t.delayCause)}))},sortArrayByToolsType(){this.finalTools={},this.tools.forEach((e=>{this.finalTools[e["type"]]?this.finalTools[e["type"]].push(e):this.finalTools[e["type"]]=[e]}))}},async mounted(){this.sortArrayByToolsType(),Object.keys(this.finalTools).forEach((e=>{this.options.push({label:e,value:e})})),this.sliders=this.options[0].value,this.flag=!0}};const Na=(0,o.Z)(qa,[["render",ya],["__scopeId","data-v-699d9cc1"]]);var Fa=Na;k()(qa,"components",{QBtnToggle:Pe.Z,QCarousel:Ae.Z,QCarouselSlide:Me.Z});var xa={name:"Check",props:[],data(){return{date:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),pages:"0",sliders:"0",tools:[],options:[],flag:!1,checkName:"",isFinished:!1,hamalsList:"",checkId:"",finalTools:"",isSpinner:!0,location:"",checkOutList:[],userName:"",mahlaka:"",urlForHamalsLocal:`${this.$url}`,urlForToolsLocal:`${this.$url}`,newvalUrl:`${this.$url}`}},beforeMount(){window.addEventListener("beforeunload",(()=>{this.checkOutList.length>0&&localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),this.hamalsList&&localStorage.setItem("tools",JSON.stringify(this.hamalsList))}),{once:!0})},beforeUnmount(){localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),localStorage.setItem("tools",JSON.stringify(this.hamalsList)),this.isSpinner=!1,console.log("off"),this.flag=!1},async mounted(){this.changePic('בניין מטכ"ל');let e=localStorage.getItem("checkout-list");e&&(this.checkOutList=await this.asyncParse(e));const t=localStorage.getItem("tools");let a=localStorage.getItem("route-params");t?(this.hamalsList=await this.asyncParse(t),a=await this.asyncParse(a),this.checkName=a["checkName"],this.checkId=a["checkId"],this.mahlaka=a["mahlaka"],this.location=a["location"],this.userName=a["userName"],this.hamalsList.forEach((e=>{this.options.push({label:e.hamalName,value:e.hamalName})})),this.sliders=this.options[0].value,this.isSpinner=!1,this.flag=!0):this.$isDjango?this.getToolsDjango():this.getToolsSp()},components:{CarouselCheck:Fa},methods:{async getToolsSp(){this.checkId=this.$route.params["checkId"],this.checkName=this.$route.params["checkName"],this.location=this.$route.params["location"],this.mahlaka=this.$route.params["mahlaka"],this.userName=this.$route.params["userName"];var e=await de().get(this.newvalUrl+"/_api/web/lists/getbyTitle('rooms')/items",{params:{$filter:`checkId eq '${this.checkId}'`}});e=e.data.value.map((e=>{var t={};return t[e["hamalId"]]=e["Title"],t}));var t=[...e];t=await de().all(t.map((e=>{const t=Object.keys(e)[0];return de().get(this.newvalUrl+"/_api/web/lists/getbyTitle('trialList2')/items",{params:{$filter:`hamalId eq '${t}'`}})}))),t=t.map((e=>e.data.value)),t=t.map((t=>{var a=t[0].hamalId;const s=e.filter((e=>Object.keys(e)[0]==a))[0][a];return{hamalName:s,tools:[...t]}})),this.hamalsList=[...t],this.hamalsList.forEach((e=>{this.options.push({label:e.hamalName,value:e.hamalName})})),this.sliders=this.options[0].value,this.isSpinner=!1,this.flag=!0},async getToolsDjango(){this.checkId=this.$route.params["checkId"],this.checkName=this.$route.params["checkName"],this.location=this.$route.params["location"],this.mahlaka=this.$route.params["mahlaka"],this.userName=this.$route.params["userName"];var e=await de().get(this.urlForHamalsLocal+`/hamal/check/${this.checkId}/`,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}});e=e.data.map((e=>{var t={};return t[e["hamalId"]]=e["Title"],t}));var t=[...e];t=await de().all(t.map((e=>de().get(this.urlForToolsLocal+`/tool/hamal/${Object.keys(e)[0]}/`,{headers:{Authorization:`Token ${sessionStorage.getItem("token")}`}})))),t=t.map((e=>e.data)),t=t.map((t=>{var a=t[0].hamalId;const s=e.filter((e=>Object.keys(e)[0]==a))[0][a];return{hamalName:s,tools:[...t]}})),this.hamalsList=[...t],this.hamalsList.forEach((e=>{this.options.push({label:e.hamalName,value:e.hamalName})})),this.sliders=this.options[0].value,this.isSpinner=!1,this.flag=!0},getHamalIdByTitleProd(e){return de().get(this.newvalUrl+"/_api/web/lists/getbyTitle('rooms')/items",{params:{$filter:`checkId eq '${e}'`}})},getToolsByHamalIdProd(e){return de().get(this.urlForToolsProd,{params:{$filter:`hamalId eq '${e}'`}})},updateDelay(e,t){console.log("finalk"),this.checkOutList.forEach((a=>{a.Title==t&&(a.delayCause=e)})),localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),localStorage.getItem("checkout-list")},updateLocal(e,t){this.checkOutList.forEach((a=>{a.Title==e&&(a.comments=t)})),localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList)),localStorage.getItem("checkout-list")},handlePass(e){this.$refs["maincar"].goTo(e)},func(){this.isFinished=!1},asyncParse(e){return new Promise(((t,a)=>{t(JSON.parse(e))}))},checkIfItemInArray(e,t){var a=!1;return e.forEach((e=>{e.Title==t&&(a=!0)})),a},checkIfTakul(e){return!!Object.keys(e).some((t=>!e[t]))},updateDelayCausesAndBoolChecks(e,t){e=e.forEach((e=>{e.Title==t.Title&&(e.delayCause=t.delayCause)}))},changePic(e){e='בניין מטכ"ל';const t=this.$refs.background;"מצודת ציון"==e&&t.classList.add("mezudat-zion"),'בניין מטכ"ל'==e&&t.classList.add("binyan-zahal"),"מרגנית"==e&&t.classList.add("marganit")},boolCheckChangeHandler(e,t){var a,s,i=[],l=[];e.forEach((e=>{e["hamal"]=t,a=this.checkIfItemInArray(this.checkOutList,e.Title),s=this.checkIfTakul(e.details.boolChecks),!a&&s&&i.push(e),a&&s&&(this.updateDelayCausesAndBoolChecks(this.checkOutList,e),this.checkOutList.forEach((t=>{t.Title==e.Title&&(t.details.boolChecks={...e.details.boolChecks})}))),a&&!s&&l.push(e)})),l.forEach((e=>{this.checkOutList=this.checkOutList.filter((t=>t.Title!==e.Title))})),this.checkOutList=[...this.checkOutList,...i],localStorage.setItem("checkout-list",JSON.stringify(this.checkOutList))}}};const Va=(0,o.Z)(xa,[["render",ga]]);var Ea=Va;k()(xa,"components",{QBtnToggle:Pe.Z,QCarousel:Ae.Z,QCarouselSlide:Me.Z});const za=e=>((0,i.dD)("data-v-50065586"),e=e(),(0,i.Cn)(),e),Pa={class:"white-and-black-flex",ref:"background"},Aa={class:"last-page-container"},Ma=za((()=>(0,i._)("h1",{class:"last-page-title"}," לפני ששולחים",-1))),Ua=za((()=>(0,i._)("h3",{class:"check-details-title"},"פרטי בדיקה ",-1))),Ha={class:"pratim"},Ba={key:1,class:"no-takalot"},Ra=za((()=>(0,i._)("span",{class:"bi bi-emoji-smile"},null,-1))),Za={class:"mail-container",ref:"mail-container"},Wa={class:"container-for-up-animation",ref:"appear-container"},Ja=za((()=>(0,i._)("h3",{class:"mail-list-title"},"רשימות הפצה ",-1))),Ya=za((()=>(0,i._)("p",{class:"mail-list-paragraph"}," בחר לאילו אנשי יישלח המייל המכיל את הדוח",-1))),Ka={class:"mail-flex"},Qa={class:"names-flex"},Xa={class:"mail-list-name"},Ga={class:"nimanim-name"},es={class:"input-container"},ts=["onInput","checked","onUpdate:modelValue"],as={class:"input-and-send"},ss=za((()=>(0,i._)("h3",{class:"hearot-klaliot"},"הערות כלליות",-1))),is=za((()=>(0,i._)("p",{class:"mail-list-paragraph"},"כאן ניתן לכתוב הערות כלליות שאינן קשורות לרכיב ספציפי",-1))),ls={class:"connection-flex"},os={key:0},ns=za((()=>(0,i._)("span",{class:"bi bi-wifi internet"},null,-1))),rs=[ns],cs={key:1},hs=za((()=>(0,i._)("span",{class:"bi bi-wifi-off no-internet"},null,-1))),ds=[hs],us=za((()=>(0,i._)("span",{class:"bi bi-arrow-left"},null,-1)));function ms(e,t,a,l,o,n){const r=(0,i.up)("CheckOut"),c=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",Pa,[(0,i._)("div",Aa,[Ma,Ua,(0,i._)("div",Ha,[(0,i._)("span",null,"בדיקה : "+(0,_.zw)(o.checkDetails.checkName),1),(0,i._)("span",null," טכנאי : "+(0,_.zw)(o.checkDetails.userName),1),(0,i._)("span",null," מחלקה : "+(0,_.zw)(o.checkDetails.mahlaka),1),(0,i._)("span",null," תאריך : "+(0,_.zw)(o.finalDate),1)]),o.tkulim.length?((0,i.wg)(),(0,i.j4)(r,{key:0,checkOutList:o.tkulim},null,8,["checkOutList"])):(0,i.kq)("",!0),o.tkulim.length?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",Ba,[(0,i.Uk)(" לא נרשמו תקלות "),Ra])),(0,i._)("button",{class:"finish-send-link",onClick:t[0]||(t[0]=(...e)=>n.sender&&n.sender(...e))}," סיים ושלח ")]),(0,i._)("div",Za,[(0,i._)("div",Wa,[Ja,Ya,(0,i._)("div",Ka,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.mailList,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"mail-item-container",key:e},[(0,i._)("div",Qa,[(0,i._)("h6",Xa,(0,_.zw)(e.listName),1),(0,i._)("span",Ga,(0,_.zw)(e.nimanim),1)]),(0,i._)("div",es,[(0,i.wy)((0,i._)("input",{onInput:t=>n.toggleSent(e.isSent,e.mail),class:(0,_.C_)(["checkbox-list",{Ystyle:e.isSent}]),checked:e.isSent,"onUpdate:modelValue":t=>e.isSent=t,type:"checkbox"},null,42,ts),[[s.e8,e.isSent]])])])))),128))]),(0,i._)("div",as,[ss,is,(0,i.wy)((0,i._)("textarea",{"max-rows":"3",placeHolder:"הכנס הערות כלליות",dir:"rtl",maxlength:"60",class:"comments-input","onUpdate:modelValue":t[1]||(t[1]=e=>o.comment=e)},"\r\n                    ",512),[[s.nr,o.comment]])]),(0,i._)("div",ls,[o.isOnline?((0,i.wg)(),(0,i.iD)("div",os,rs)):(0,i.kq)("",!0),o.isOnline?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",cs,ds))]),(0,i.Wm)(c,{class:"back-link",to:{path:`/${this.checkDetails["checkId"]}`,params:{checkId:this.checkDetails["checkId"]},name:"check"}},{default:(0,i.w5)((()=>[us,(0,i.Uk)("חזור ")])),_:1},8,["to"])],512)],512)],512)}const ps=e=>((0,i.dD)("data-v-1c01a4f7"),e=e(),(0,i.Cn)(),e),ks={class:"checkout-container"},gs=ps((()=>(0,i._)("h3",{class:"checkout-details-title"},"רכיבים תקולים ",-1))),fs=ps((()=>(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",null," שם רכיב "),(0,i._)("th",null,' חמ"ל '),(0,i._)("th",null," תקלות "),(0,i._)("th",null," גורם מעכב "),(0,i._)("th",null," הערות ")])],-1))),ys={class:"tool-title-container"},bs={class:"overfl-class"};function ws(e,t,a,s,l,o){return(0,i.wg)(),(0,i.iD)("div",ks,[gs,(0,i._)("table",null,[fs,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.checkOutList,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i._)("td",null,[(0,i._)("span",ys,(0,_.zw)(e.Title),1)]),(0,i._)("td",null,(0,_.zw)(e.hamal),1),(0,i._)("td",bs,(0,_.zw)(o.getToolErrors(e.details.boolChecks)),1),(0,i._)("td",null,(0,_.zw)(e.delayCause),1),(0,i._)("td",null,(0,_.zw)(e.comments),1)])))),128))])])])}var vs={name:"CheckOut",props:["checkOutList"],data(){return{checkOutFinal:[]}},methods:{getToolErrors(e){var t="";return Object.keys(e).forEach((a=>{e[a]||(t+=a+" ,")})),t=t.slice(0,t.length-1),t}}};const Cs=(0,o.Z)(vs,[["render",ws],["__scopeId","data-v-1c01a4f7"]]);var Ts=Cs,Ds={name:"BeforeSend",data(){return{isOnline:navigator.onLine,finalDate:Re()(new Date,"LLLL","he").format("DD/MM יום dddd "),requestFinalSend:{},finalMails:["i:0#.w|army\\r03830010"],comment:"",url:"https://portal.army.idf/sites/gdud0383/team/_api/SP.Utilities.utility.SendEmail",urlFormDigest:"https://portal.army.idf/sites/gdud0383/Team/_api/contextinfo",requestFinalUrl:`${this.$url}`,mailList:[{listName:"גדוד 383",isSent:!1,nimanim:"אלירן שריקי",mail:["s8739496@army.idf.il","s7392542@army.idf.il"]},{listName:"גדוד 383",isSent:!1,nimanim:"דקל , אבי",mail:["s8422760@army.idf.il","s9007598@army.idf.il"]}],tkulim:"",Ystyle:{"--clip-path":"polygon(14% 44%,0 65%,50% 100%,100% 16%, 80% 0, 43% 62%)","--shadow-color":"rgb(104, 243, 76)"},checkDetails:""}},components:{CheckOut:Ts},mounted(){this.addConnectionsEventListeners(),this.changePic(this.checkDetails["location"]),this.handleAnimations()},beforeMount(){localStorage.getItem("checkout-list")?(this.tkulim=JSON.parse(localStorage.getItem("checkout-list")),this.checkDetails=JSON.parse(localStorage.getItem("route-params"))):(this.tkulim=JSON.parse(this.$route.params.tkulim),this.checkDetails=JSON.parse(this.$route.params.checkDetails)),console.log(this.checkDetails)},methods:{showStatus(){navigator.onLine?(this.isOnline=!0,this.$q.notify({message:"זוהה אינטרנט",type:"positive"})):(this.isOnline=!1,this.$q.notify({message:"אין אינטרנט",type:"negative"}))},addConnectionsEventListeners(){window.ononline=this.showStatus,window.onoffline=this.showStatus},handleAnimations(){this.$refs["mail-container"].addEventListener("animationend",(()=>{this.$refs["appear-container"].classList.add("appear-animation-class")}),{once:!0}),this.$refs["mail-container"].classList.add("stretch-animation-class")},hashFunc(e){var t,a,s=0;if(0===e.length)return s;for(t=0;t<e.length;t++)a=e.charCodeAt(t),s=(s<<5)-s+a,s|=0;return Math.abs(s).toString()},toggleSent(e,t){e?t.forEach((e=>{this.finalMails=this.finalMails.filter((t=>t!==e))})):t.forEach((e=>{this.finalMails.push(e)})),console.log(this.finalMails)},changePic(e){const t=this.$refs.background;"מצודת ציון"==e&&t.classList.add("mezudat-zion"),'בניין מטכ"ל'==e&&t.classList.add("binyan-zahal"),"מרגנית"==e&&t.classList.add("marganit")},postReportDjango(){var e={headers:{Authorization:`Token ${sessionStorage.getItem("token")}`,Accept:"application/json;odata=verbose"}},t={submitDate:new Date,submitter:this.requestFinalSend["submitter"],tkulim:JSON.stringify(this.requestFinalSend["tkulim"]),mahlaka:this.requestFinalSend["mahlaka"],comment:this.requestFinalSend["comments"],checkId:this.requestFinalSend["checkId"]};return de().post(this.requestFinalUrl+"/report/create/",t,e)},postReportSp(e){var t={headers:{"X-RequestDigest":e,"content-type":"application/json;odata=verbose",Accept:"application/json;odata=verbose"}},a={__metadata:{type:"SP.Data.ReportsListItem"},Title:"דוח",submitDate:new Date,reportId:this.requestFinalSend["reportId"],check:this.requestFinalSend["check"],submitter:this.requestFinalSend["submitter"],tkulim:JSON.stringify(this.requestFinalSend["tkulim"]),mahlaka:this.requestFinalSend["mahlaka"],comment:this.requestFinalSend["comments"]};return de().post(this.requestFinalUrl+"/_api/web/lists/getbytitle('reports')/items",a,t)},getToolErrors(e){var t="";return Object.keys(e).forEach((a=>{e[a]||(t+=a+" ,")})),t=t.slice(0,t.length-1),t},sendEmail(e){this.requestFinalSend["location"],this.requestFinalSend["location"],this.requestFinalSend["location"];var t=`הנך משותף עם דוח חדש פורסם על ידי  ${this.requestFinalSend["submitter"]} בחמ"ל  ${this.requestFinalSend["check"]}`;const a=`<html xmlns="http://www.w3.org/1999/xhtml"><head>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;">\n</head>\n<body style="margin: 0; padding: 0; width: 100%; height: 100%; background: #F8F8F8;">\n\x3c!----\x3e\n<table width="90%" border="0" cellpadding="0" cellspacing="0" class="BGtable" style="border-collapse: collapse; margin: 0px; padding: 0px; background-color: #f8f8f8; height: 100%; width: 100%;">\n    <tr>\n        <td valign="top" class="BGtable-inner" style="padding: 10px;">\n            <table width="100" border="0" align="center" cellpadding="0" cellspacing="0" class="row fg rounded-corner" style="border-collapse: collapse; background-color: #ffffff; border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; width: 350px;">\n                <tr>\n                    <td>\n                        <table width="100%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse;text-align: center;">\n                            <tr>\n                                <td>\n                                    <a href="https://portal.army.idf/sites/gdud0383/Team/dohamal/index.html#/">\n                                        \n                                            <img src="https://portal.army.idf/sites/gdud0383/Team/SiteAssets/dohamalTitle.png" alt="image" border="0" class="tP img" style="border:0; width: 400px">\n                                        \n                                    </a>\n                                </td>\n                            </tr>\n                        </table>\n                        <table width="90%" border="0" cellspacing="0" cellpadding="0" style="border-collapse: collapse;" align="right" dir="rtl">\n                            <tr>\n                                <td class="content normal-td" style="padding-bottom: 0px; padding-left: 0px; padding-right: 0px; padding-top: 0px; font-family: Questrial, 'Helvetica Neue', Helvetica, arial; font-size: 13px; line-height: 20px; font-weight: 400; color: #555555; padding: 20px -1px 0;">\n                                    <div style="font-family: Arial,serif; font-size: 12pt;" dir="rtl">\n                                     \n                                        <p>הנך משותף עם דוח חדש שפורסם על ידי  ${this.requestFinalSend["submitter"]}  </p>\n                                \n\n                                      <p>בחמ"ל:  <b>   ${this.requestFinalSend["check"]} </b> </p>\n                                      \n                                     \n                                        \n                                        \n                                        <a href="${this.emailLink}" style="color: #3f9e09; text-decoration: initial; outline: none;" target="_blank">\n                                            <img src="https://portal.army.idf/sites/gdud0383/Team/SiteAssets/lower.jpg" border="0" alt="button" style="border: 0; display: block; float: right;" dir="rtl">\n                                        </a>\n                                        \n                                    </div>\n                                </td>\n                            </tr>\n                        </table>\n                    </td>\n                </tr>\n            </table>\n            <table width="600" border="0" align="center" cellpadding="0" cellspacing="0" class="row" style="border-collapse: collapse; width: 600px;">\n                <tr>\n                    <td height="28">\n                        <img src="https://portal.army.idf/sites/gdud0383/Team/SiteAssets/divider.png" width="600" height="28" class="divider" style="border: 0; display: block; -ms-interpolation-mode: bicubic; height: 28px;">\n                    </td>\n                </tr>\n            </table>\n        </td>\n    </tr>\n</table>\n</body>\n</html>\n`;var s=JSON.stringify({properties:{From:"s8704173@army.idf.il",To:{results:this.finalMails},Body:a,Subject:t}}),i={headers:{"X-RequestDigest":e,accept:"application/json;odata=verbose","content-type":"application/json;odata=verbose"}},l="אירעה שגיאה",o=" בדוק שסימנת נמענים ושקיים חיבור לאינטרנט";return de().post(this.url,s,i).catch((()=>{this.$swal.fire(l,o,"error")}))},getDigestValue(){var e="אירעה שגיאה",t=" בדוק שסימנת נמענים ושקיים חיבור לאינטרנט";return de().post(this.urlFormDigest).catch((()=>{this.$swal.fire(e,t,"error")}))},async sender(){if(window.navigator.onLine){try{await this.sendRandomRequest()}catch{return void this.noConnectionSwal(this.$swal)}console.log(this.finalMails);var e=this.hashFunc(Date.now()+this.checkDetails["mahlaka"]);if(console.log(e),this.requestFinalSend["reportId"]=e,this.requestFinalSend["comments"]=this.comment,this.requestFinalSend["submitDate"]=this.checkDetails["date"],this.requestFinalSend["checkId"]=this.checkDetails["checkId"],this.requestFinalSend["mahlaka"]=this.checkDetails["mahlaka"],this.requestFinalSend["check"]=this.checkDetails["checkName"],this.requestFinalSend["location"]=this.checkDetails["location"],this.requestFinalSend["submitter"]=this.checkDetails["userName"],this.requestFinalSend["Title"]="דוח ראשון",this.requestFinalSend["tkulim"]={...this.tkulim},this.$isDjango){var t=await this.postReportDjango();t&&(this.emailLink=`${this.$url}?reportId=${t.data.id}`,this.$swal.fire("הדוח נשלח ונשמר בהצלחה","","success"),localStorage.clear(),this.$router.push({path:"/",name:"Main"}))}else{this.emailLink=`${this.$url}/report/index.html?reportId=${this.requestFinalSend["reportId"]}`;var a=await this.getDigestValue(),s=a.data.FormDigestValue,i=await this.sendEmail(s);if(i){t=await this.postReportSp(s);this.$swal.fire("הדוח נשלח ונשמר בהצלחה","","success"),localStorage.clear(),this.$router.push({path:"/",name:"Main"})}}this.$emit("onModalClose")}else this.noConnectionSwal(this.$swal)}}};const Is=(0,o.Z)(Ds,[["render",ms],["__scopeId","data-v-50065586"]]);var $s=Is;const _s=[{path:"/",name:"Main",component:lt},{path:"/edit/edit-ui",name:"CheckEdit",component:Je},{path:"/check/:checkId",name:"check",component:Ea},{path:"/edit/:checkId",name:"edit",component:Je},{path:"/:mode",name:"mode",component:ra},{path:"/check/final",name:"final",component:$s,props:e=>({...e.params})}],Ls=(0,b.p7)({history:(0,b.r5)(),routes:_s});var Ss=Ls,js=a(17729),Os=a.n(js),qs=a(8029),Ns=a(45033),Fs=a.n(Ns),xs=a(96666),Vs={iconSet:Fs(),config:{notify:{}},extras:["mater"],plugins:[xs.Z],framework:{iconSet:Fs()}};const Es=(0,s.ri)(y).use(qs.Z,Vs);Es.use(Ss),Es.use(Os()),Es.config.globalProperties.$isDjango=!window.location.href.includes("portal.army.idf"),Es.config.globalProperties.$mahlaka="vc";const zs="";Es.config.globalProperties.$url=Es.config.globalProperties.$isDjango?zs:"https://portal.army.idf/sites/gdud0383/Team",Es.config.globalProperties.sendRandomRequest=()=>{const e=new URL(window.location.origin);return e.searchParams.set("rand",Math.random().toString(36).substring(2,15)),fetch(e.toString(),{methods:"HEAD"})},Es.config.globalProperties.noConnectionSwal=e=>{var t="לא ניתן לבצע את הפעולה מכיוון שאינך מחובר לאינטרנט",a="וודא שאתה מחובר לאינטרנט לפני שאתה מנסה שוב";e.fire({title:t,text:a,timer:2e3,icon:"error"})},Es.mount("#app")}},t={};function a(s){var i=t[s];if(void 0!==i)return i.exports;var l=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(l.exports,l,l.exports,a),l.loaded=!0,l.exports}a.m=e,function(){var e=[];a.O=function(t,s,i,l){if(!s){var o=1/0;for(h=0;h<e.length;h++){s=e[h][0],i=e[h][1],l=e[h][2];for(var n=!0,r=0;r<s.length;r++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](s[r])}))?s.splice(r--,1):(n=!1,l<o&&(o=l));if(n){e.splice(h--,1);var c=i();void 0!==c&&(t=c)}}return t}l=l||0;for(var h=e.length;h>0&&e[h-1][2]>l;h--)e[h]=e[h-1];e[h]=[s,i,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p=""}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var i,l,o=s[0],n=s[1],r=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(r)var h=r(a)}for(t&&t(s);c<o.length;c++)l=o[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(h)},s=self["webpackChunkdohamal_edit_django"]=self["webpackChunkdohamal_edit_django"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(91059)}));s=a.O(s)})();
//# sourceMappingURL=app.cc4549eb.js.map